---
author: √Ålvaro Cabana y una inteligencia artificial generativa
lang: es
aliases: [Tablas.html]
---

# Tablas


Una de las primeras cosas que aprendemos cuando nos acercamos a la investigaci√≥n ‚Äîya sea como estudiantes o como lectores cr√≠ticos‚Äî es que muchas preguntas importantes no se responden con una √∫nica cifra, sino con **una tabla**. Y sin embargo, nadie nos ense√±a con suficiente detalle a leerlas bien.

Las tablas est√°n por todos lados. En art√≠culos, en informes, en presentaciones de resultados. Se usan para mostrar diagn√≥sticos, comparar tratamientos, resumir encuestas, registrar elecciones, agrupar s√≠ntomas, clasificar pacientes. A veces parecen triviales: solo una cuadr√≠cula con n√∫meros. Pero un malentendido en c√≥mo leerlas puede llevar a **conclusiones completamente erradas**. De hecho, muchas de las ideas m√°s equivocadas sobre datos sociales surgen de leer mal una tabla.

En este cap√≠tulo vamos a detenernos en ese primer paso, fundamental pero a veces ignorado: **leer una tabla categ√≥rica**. No solo verla, sino entender:

* qu√© representa cada n√∫mero,
* c√≥mo se comparan las filas y las columnas,
* qu√© tipo de proporci√≥n estamos leyendo (y cu√°l *creemos* que estamos leyendo),
* y qu√© conclusiones podemos (o no podemos) sacar a partir de ella.

Y lo vamos a hacer paso a paso, desde lo m√°s b√°sico: contar.

Porque antes de correr modelos, hacer tests, o calcular valores *p*, hay algo m√°s simple y m√°s poderoso: **mirar con atenci√≥n qu√© dicen los datos, y c√≥mo lo dicen**.


Perfecto. Entonces seguimos con ese estilo narrativo y reflexivo, integrando ejemplos reales y bloques de c√≥digo en R cuando sea √∫til. Ahora empiezo con la secci√≥n sobre **frecuencias absolutas**:

## Contar: la primera estad√≠stica

Antes de hablar de porcentajes, probabilidades o inferencias, hay algo que hacemos todo el tiempo sin pensarlo mucho: **contar**. ¬øCu√°ntas personas dijeron que s√≠? ¬øCu√°ntos eligieron la opci√≥n A? ¬øCu√°ntos pacientes presentaron s√≠ntomas?

Contar es tan b√°sico que a veces no lo tratamos como una operaci√≥n estad√≠stica. Pero lo es. De hecho, en datos categ√≥ricos, contar **es** hacer estad√≠stica descriptiva.

Cuando contamos, estamos calculando lo que se llama una **frecuencia absoluta**. Es simplemente eso: el n√∫mero de veces que aparece una categor√≠a.

### Ejemplo: animales favoritos

Supongamos que en una clase de 40 estudiantes les pedimos que elijan su animal favorito entre tres opciones: gatos, perros y aves. Obtenemos las siguientes respuestas:

```{r}
#| label: datos-animales
#| echo: true

respuestas <- c("Gato", "Perro", "Perro", "Gato", "Ave", "Perro", "Perro", "Gato",
                "Perro", "Gato", "Gato", "Perro", "Ave", "Perro", "Perro", "Gato",
                "Perro", "Ave", "Gato", "Gato", "Perro", "Perro", "Perro", "Gato",
                "Ave", "Perro", "Perro", "Gato", "Perro", "Ave", "Gato", "Perro",
                "Perro", "Perro", "Gato", "Gato", "Ave", "Perro", "Gato", "Perro")

tabla_absoluta <- table(respuestas)
knitr::kable(tabla_absoluta,col.names = c("respuestas","frecuencia"),align="c")
```

Esto nos da la tabla de frecuencias absolutas. Es lo m√°s b√°sico, pero ya nos permite ver cu√°l fue la opci√≥n m√°s popular (en este caso, claramente *Perro*). Pero esa es solo una parte de la historia.


## Ver lo que contamos

Los humanos somos visuales. Podemos leer la tabla de frecuencias, pero la vemos mucho mejor si la graficamos. Ac√° va el gr√°fico de barras correspondiente:

```{r}
#| label: grafico-animales
#| fig-cap: "Frecuencias absolutas de animales favoritos"

barplot(tabla_absoluta,
        main = "Animales favoritos",
        col = "skyblue",
        ylab = "Cantidad de estudiantes")
```

Esta es una tabla sencilla. Pero m√°s adelante vamos a ver que a veces, incluso con una tabla simple, se pueden cometer errores de interpretaci√≥n si no se tiene en cuenta el tipo de frecuencia o el contexto.

Por ahora, la gran idea es esta:

> **Contar categor√≠as es el primer paso para entender los datos.**

Todo lo que viene despu√©s ‚Äîproporciones, porcentajes, pruebas estad√≠sticas‚Äî se construye sobre ese primer conteo.

Perfecto. Seguimos avanzando en el cap√≠tulo, manteniendo el estilo narrativo y el uso de c√≥digo en R. Pasamos ahora a **frecuencias relativas y porcentuales**.


## ¬øQu√© tan grande es ‚Äúmucho‚Äù?

Contar est√° bien. Pero a veces no alcanza. Saber que 22 personas eligieron ‚ÄúPerro‚Äù est√° bueno, pero... ¬ø22 sobre cu√°ntas? ¬øEs la mayor√≠a? ¬øEs m√°s de la mitad? ¬øEs *mucho*?

Ah√≠ es donde entra la **frecuencia relativa**. Lo que antes era ‚Äúcu√°ntas personas eligieron esta opci√≥n‚Äù ahora se convierte en:

> **¬øQu√© proporci√≥n del total eligi√≥ esta opci√≥n?**

Es una pregunta diferente. Y muchas veces, **m√°s √∫til**.

### Del n√∫mero al total

Volvamos a nuestro ejemplo. Ya ten√≠amos la tabla de frecuencias absolutas. Ahora vamos a calcular la proporci√≥n que representa cada categor√≠a respecto al total de respuestas:

```{r}
#| label: tabla-relativa
#| tbl-cap: "Frecuencias relativas (proporciones) de animales favoritos"

tabla_relativa <- prop.table(tabla_absoluta)
knitr::kable(round(tabla_relativa, 3),col.names = c("respuestas","frecuencia"),align="c")

```

Ahora vemos que:

* ‚ÄúPerro‚Äù fue elegido por el 50% de los estudiantes.
* ‚ÄúGato‚Äù, por el 35%.
* ‚ÄúAve‚Äù, por el 15%.

M√°s all√° del conteo, ahora sabemos qu√© **fracci√≥n del grupo** representa cada preferencia. Y eso nos permite **comparar categor√≠as con tama√±os distintos**.

---

### Lo mismo, pero con el 100%

A veces no queremos ver proporciones con coma. Queremos porcentajes. Porque a veces es m√°s f√°cil entender: ‚ÄúEl 15% eligi√≥ Ave‚Äù que ‚Äú0.15 eligi√≥ Ave‚Äù

Eso es una **frecuencia porcentual**: la frecuencia relativa multiplicada por 100.

```{r}
#| label: tabla-porcentual
#| tbl-cap: "Frecuencias porcentuales de animales favoritos"

round(100 * tabla_relativa, 1)
```

### Ver lo relativo

As√≠ como hicimos con los conteos, podemos graficar las proporciones. Ahora, en vez de cantidad de personas, mostramos **porcentaje** sobre el total.

```{r}
#| label: grafico-porcentual
#| fig-cap: "Frecuencias porcentuales de animales favoritos"

barplot(100 * tabla_relativa,
        main = "Animales favoritos (porcentaje)",
        col = "lightgreen",
        ylab = "Porcentaje")
```

La tabla y el gr√°fico muestran lo mismo, pero de otra forma. A veces te conviene contar. A veces, comparar proporciones. Y lo importante es saber **cu√°l est√°s usando**.

Porque, como veremos m√°s adelante, **muchos errores de interpretaci√≥n** vienen de confundir una tabla con n√∫meros crudos con otra que muestra proporciones.


## Sumar hacia arriba: la frecuencia acumulada

Hasta ahora hablamos de categor√≠as como si fueran simplemente distintas entre s√≠. Perros, gatos, aves. Ninguna tiene un ‚Äúm√°s‚Äù o un ‚Äúmenos‚Äù, ninguna est√° antes o despu√©s que otra. Solo son distintas. Pero no todas las categor√≠as son as√≠.

A veces, las categor√≠as tienen **orden**.

Pens√° en escalas de respuesta como estas:

* ‚ÄúNada‚Äù, ‚ÄúPoco‚Äù, ‚ÄúAlgo‚Äù, ‚ÄúMucho‚Äù
* ‚ÄúNunca‚Äù, ‚ÄúA veces‚Äù, ‚ÄúFrecuentemente‚Äù, ‚ÄúSiempre‚Äù
* ‚ÄúTotalmente en desacuerdo‚Äù a ‚ÄúTotalmente de acuerdo‚Äù

En estos casos, no estamos eligiendo simplemente una etiqueta. Estamos ubic√°ndonos en una **serie ordenada de niveles**. Esa estructura permite hacer algo que antes no pod√≠amos: **acumular**.


### ¬øPara qu√© sirve acumular?

Imagin√° que est√°s estudiando el nivel de ansiedad en una poblaci√≥n, con una escala ordinal del 1 al 5, donde 1 es ‚Äúmuy baja ansiedad‚Äù y 5 es ‚Äúmuy alta ansiedad‚Äù.

Ten√©s los siguientes resultados de una encuesta a 30 personas:

```{r}
#| label: datos-ansiedad
#| echo: true

set.seed(123)
ansiedad <- sample(1:5, size = 30, replace = TRUE, prob = c(0.2, 0.3, 0.3, 0.1, 0.1))
ansiedad_tabla <- table(ansiedad)
ansiedad_tabla
```

Pod√©s ver cu√°ntas personas hay en cada nivel. Eso es √∫til. Pero capaz lo que te interesa no es tanto ‚Äú¬øcu√°ntas dijeron 3?‚Äù, sino:

* ¬øCu√°ntas personas tienen ansiedad de 3 **o menos**?
* ¬øQu√© porcentaje del grupo est√° en los niveles **m√°s bajos**?

Ah√≠ es donde entra la **frecuencia acumulada**: sum√°s progresivamente las frecuencias hasta cada punto del orden.

### C√≥mo se calcula

```{r}
#| label: tabla-acumulada
#| tbl-cap: "Frecuencias acumuladas de niveles de ansiedad"

acumulada <- cumsum(ansiedad_tabla)
acumulada
```

Tambi√©n pod√©s convertirla en proporciones:

```{r}
#| label: porcentual-acumulada
#| tbl-cap: "Frecuencias acumuladas porcentuales"

acumulada_porcentual <- round(100 * cumsum(prop.table(ansiedad_tabla)), 1)
acumulada_porcentual
```

### ¬øQu√© aprendemos con esto?

Por ejemplo, podemos ver que el **63% de las personas** tiene una puntuaci√≥n de ansiedad **3 o menos**. Esa informaci√≥n no la da ninguna frecuencia aislada, y es clave si quer√©s responder preguntas como:

> ¬øQu√© proporci√≥n de la poblaci√≥n est√° en el rango ‚Äúbajo‚Äù o ‚Äúmoderado‚Äù?

Las frecuencias acumuladas nos ayudan a identificar **umbrales**, **cortes** y **agrupamientos** en escalas ordinales. Son especialmente √∫tiles en psicolog√≠a, donde se usan constantemente escalas de Likert, niveles de severidad, o clasificaciones de s√≠ntomas.

---

### Ver la acumulaci√≥n

Podemos representar la acumulaci√≥n como una **l√≠nea creciente**, que muestra c√≥mo se van sumando los porcentajes.

```{r}
#| label: grafico-acumulada
#| fig-cap: "Frecuencia acumulada de ansiedad (escala 1‚Äì5)"

plot(acumulada_porcentual, type = "b", pch = 16,
     xlab = "Nivel de ansiedad", ylab = "Porcentaje acumulado",
     main = "Frecuencia acumulada de ansiedad",
     ylim = c(0, 100))
abline(h = 50, col = "gray", lty = 2)
```

La l√≠nea gris horizontal marca el 50%. Donde la curva lo cruza, est√° la **mediana categ√≥rica**: el punto donde la mitad de las personas est√°n por debajo.

**Contar** es solo el principio. Pero cuando hay orden, **sumar** nos cuenta una historia diferente. Una historia de acumulaci√≥n, de corte, de ‚Äúhasta aqu√≠‚Äù y ‚Äúa partir de ac√°‚Äù. Y eso, en psicolog√≠a, es a veces la diferencia entre un caso leve y uno severo.

Perfecto. Voy a continuar con la secci√≥n sobre **tablas de contingencia**, cuidando que el tono se mantenga narrativo, reflexivo y accesible, con ejemplos claros y progresivos. Ac√° vamos.

---

## Dos variables, una tabla: cuando las categor√≠as se cruzan

Hasta ahora ven√≠amos mirando **una sola variable a la vez**. Cont√°bamos cu√°ntas personas eligieron esta opci√≥n o aquella. Calcul√°bamos qu√© porcentaje respondi√≥ de cierta manera. Ve√≠amos c√≥mo se acumulaban los niveles de una escala.

Pero la mayor√≠a de las preguntas interesantes en psicolog√≠a ‚Äîy en ciencias sociales en general‚Äî no se responden mirando una sola variable. Nos interesa saber **c√≥mo se relacionan entre s√≠**.

* ¬øTienen m√°s actitudes negativas hacia la terapia los varones que las mujeres?
* ¬øSe diagnostica m√°s ansiedad en quienes tienen trabajos precarios?
* ¬øHay m√°s rechazo a la eutanasia entre personas con menor nivel educativo?

Todas estas preguntas implican **dos variables categ√≥ricas**. Y cuando eso pasa, aparece un recurso fundamental: la **tabla de contingencia**.


### ¬øQu√© es una tabla de contingencia?

Es simplemente una forma ordenada de mostrar cu√°ntas personas (o casos) **caen simult√°neamente** en cada combinaci√≥n de categor√≠as de dos variables.

Por ejemplo, si tenemos informaci√≥n sobre el **g√©nero** de una persona (hombre, mujer, otro) y su **opini√≥n** sobre la eficacia de la psicoterapia (positiva o negativa), podemos construir una tabla que muestre c√≥mo se distribuyen esas respuestas:

```{r}
#| label: tabla-contingencia-ejemplo
#| tbl-cap: "Ejemplo de tabla de contingencia: G√©nero √ó Opini√≥n sobre terapia"

genero <- c(rep("Mujer", 50), rep("Hombre", 40), rep("Otro", 10))
opinion <- c(rep("Positiva", 35), rep("Negativa", 15),
             rep("Positiva", 20), rep("Negativa", 20),
             rep("Positiva", 8), rep("Negativa", 2))

tabla_conjunta <- table(genero, opinion)
tabla_conjunta
```

Esta tabla nos muestra **frecuencias absolutas conjuntas**. Es decir, cu√°ntas personas hay en cada cruce de categor√≠as: cu√°ntas mujeres con opini√≥n positiva, cu√°ntos hombres con opini√≥n negativa, etc.


### ¬øQu√© se puede leer de esta tabla?

A simple vista, parece que:

* Hay m√°s mujeres con opini√≥n positiva que negativa.
* Entre los hombres, la distribuci√≥n es m√°s pareja.
* El grupo ‚ÄúOtro‚Äù tambi√©n tiende a opinar m√°s positivamente.

Pero, como veremos m√°s adelante, **mirar s√≥lo los n√∫meros absolutos puede ser enga√±oso**.

Por ahora, qued√©monos con la idea de que la tabla de contingencia **resume c√≥mo se distribuyen dos variables categ√≥ricas**, y que es la puerta de entrada a casi todo lo que vamos a querer analizar despu√©s: proporciones condicionales, relaciones, independencias, efectos.

Y, por supuesto, la vamos a querer ver tambi√©n como gr√°fico.


### Visualizar la tabla

Podemos convertir esa tabla en un gr√°fico de barras apiladas o agrupadas. Por ejemplo:

```{r}
#| label: grafico-contingencia
#| fig-cap: "Distribuci√≥n conjunta de opini√≥n sobre terapia seg√∫n g√©nero"

library(ggplot2)

datos <- data.frame(genero, opinion)

ggplot(datos, aes(x = genero, fill = opinion)) +
  geom_bar(position = "dodge") +
  labs(title = "Opini√≥n sobre la terapia seg√∫n g√©nero",
       x = "G√©nero", y = "Cantidad de personas") +
  theme_minimal(base_size = 14)
```

Este gr√°fico nos permite ver **en paralelo** las frecuencias de cada categor√≠a, lo que a veces es m√°s f√°cil que comparar n√∫meros en una cuadr√≠cula. Pero ‚Äîy esto es clave‚Äî este gr√°fico est√° mostrando los **valores absolutos**, no proporciones. Y ah√≠ es donde pueden empezar los malentendidos.

 Perfecto. Esta secci√≥n es clave porque muchos errores de interpretaci√≥n se originan aqu√≠. Vamos a desarrollar con cuidado y ejemplos c√≥mo los **totales** estructuran la lectura, y c√≥mo se pueden **malinterpretar relaciones** si no se considera esto. Aqu√≠ va.

---

## Los totales mandan: leer bien una tabla (y no cometer errores)

Cuando uno mira una tabla de contingencia, lo primero que suele hacer es comparar los n√∫meros. Cu√°ntos hay en una celda, cu√°ntos en otra. Y a veces esa comparaci√≥n es √∫til. Pero otras veces puede ser totalmente enga√±osa.

El problema est√° en no tener en cuenta **de qu√© total estamos hablando**.

---

### Tres tipos de totales, tres formas de leer

Una tabla de contingencia puede organizarse (y leerse) de distintas maneras seg√∫n **qu√© total se est√° usando como referencia**.

Veamos los tres casos principales:

### üß± 1. Totales por fila

Esto pasa cuando preguntamos:

> ‚ÄúDado que la persona es mujer, ¬øqu√© opin√≥ sobre la terapia?‚Äù

Es decir: **ya sabemos** a qu√© grupo pertenece (la fila), y queremos ver c√≥mo se distribuyen sus respuestas (las columnas). En este caso, **las proporciones se calculan por fila**.

```{r}
#| label: proporciones-fila
#| tbl-cap: "Proporciones por fila: ¬øqu√© opin√≥ cada grupo?"

prop_filas <- prop.table(tabla_conjunta, margin = 1)
round(prop_filas, 2)
```

Esto responde preguntas del tipo:

* ¬øQu√© porcentaje de mujeres tuvo opini√≥n positiva?
* ¬øQu√© porcentaje de hombres fue negativo?

Estas proporciones **son condicionales a la fila**. Y se usan todo el tiempo en psicolog√≠a, especialmente cuando hay **grupos naturales** (g√©nero, diagn√≥stico, condici√≥n experimental).

---

### üß± 2. Totales por columna

Ahora cambiamos la pregunta:

> ‚ÄúDado que la persona tuvo opini√≥n positiva, ¬øde qu√© grupo fue?‚Äù

Es decir: ya sabemos la **respuesta** (la columna), y queremos ver su distribuci√≥n por **grupo** (la fila). Calculamos **proporciones por columna**.

```{r}
#| label: proporciones-columna
#| tbl-cap: "Proporciones por columna: ¬øde qu√© grupo son los que opinaron as√≠?"

prop_columnas <- prop.table(tabla_conjunta, margin = 2)
round(prop_columnas, 2)
```

Esto responde preguntas como:

* ¬øDe qu√© g√©nero son la mayor√≠a de los que opinaron negativamente?
* ¬øQu√© grupo est√° sobrerrepresentado entre los que opinan positivamente?

Estas proporciones **pueden ser √∫tiles**, pero se prestan a confusi√≥n si uno cree que est√° viendo lo mismo que en la tabla anterior. **No lo est√°.**


### üåê 3. Total general

A veces lo que queremos es mirar las proporciones respecto al total de la muestra, sin condicionar por fila ni por columna.

```{r}
#| label: proporciones-total
#| tbl-cap: "Proporciones sobre el total general"

prop_total <- prop.table(tabla_conjunta)
round(prop_total, 2)
```

Esto responde:

* ¬øQu√© fracci√≥n de la muestra son mujeres con opini√≥n positiva?
* ¬øQu√© porcentaje total del estudio representa cada celda?

Es √∫til para estimar prevalencias conjuntas. Pero no sirve para comparar respuestas dentro de grupos.


## ‚ö†Ô∏è ¬øPor qu√© importa esto?

Porque si no sabemos **qu√© total estamos usando**, podemos decir cosas como:

> ‚ÄúLa mayor√≠a de los que est√°n en contra de la terapia son hombres‚Äù.

Cuando en realidad **hay m√°s hombres en contra simplemente porque hay m√°s hombres en total**.

O peor:

> ‚ÄúLos hombres son m√°s negativos hacia la terapia‚Äù.

Cuando al calcular los porcentajes **dentro de cada grupo**, tal vez descubrimos que en realidad **hay m√°s negatividad proporcional entre las mujeres**.

Estos errores son **muy comunes** en art√≠culos, medios, e incluso investigaciones. Y se derivan de no distinguir claramente **la estructura del total**.


> üß† Regla de oro **Nunca interpretes una tabla de contingencia sin saber primero de qu√© total est√°s hablando.**


Perfecto. Ahora seguimos con una secci√≥n dedicada a las **tablas de prevalencia**, un tipo muy com√∫n y muy √∫til de tabla en psicolog√≠a y epidemiolog√≠a, pero que tambi√©n puede inducir a errores si no se interpreta bien. La idea es seguir desarrollando la intuici√≥n del lector y mostrarle c√≥mo identificar este tipo especial de tabla.

---

## Tablas de prevalencia: ver cu√°nto hay de algo, dentro de algo

En psicolog√≠a cl√≠nica, epidemiolog√≠a y salud mental, una de las preguntas m√°s frecuentes que nos hacemos es:

> ‚Äú¬øCu√°nta gente presenta esta condici√≥n en este grupo?‚Äù

Por ejemplo:

* ¬øQu√© porcentaje de adolescentes varones tiene s√≠ntomas de depresi√≥n?
* ¬øCu√°l es la proporci√≥n de pacientes con ansiedad en personas desempleadas?
* ¬øCu√°ntas personas con bajo nivel educativo han intentado suicidarse?

Este tipo de preguntas no apunta a una comparaci√≥n entre grupos, ni a una inferencia estad√≠stica (todav√≠a). Lo que busca es saber **cu√°nto hay de una caracter√≠stica** (un diagn√≥stico, un s√≠ntoma, una conducta) **dentro de una poblaci√≥n determinada**.

Esa pregunta tiene nombre: se llama **prevalencia**.

---

### ¬øQu√© es la prevalencia?

Es la proporci√≥n de personas que presentan una caracter√≠stica determinada dentro de un grupo dado, en un momento espec√≠fico.

> **Prevalencia = casos positivos / total del grupo**

Es una proporci√≥n condicional. Es decir, est√° **condicionada al grupo de referencia**.

---

### Ejemplo: prevalencia de ansiedad por nivel educativo

Supongamos que se encuest√≥ a 120 personas, divididas en tres niveles educativos: b√°sico, medio y superior. Se les pregunt√≥ si hab√≠an experimentado ansiedad cl√≠nica el √∫ltimo mes. Obtenemos la siguiente tabla:

```{r}
#| label: tabla-prevalencia
#| tbl-cap: "Casos de ansiedad por nivel educativo"

educacion <- c(rep("B√°sico", 40), rep("Medio", 40), rep("Superior", 40))
ansiedad <- c(rep("S√≠", 15), rep("No", 25),
              rep("S√≠", 10), rep("No", 30),
              rep("S√≠", 5), rep("No", 35))

tabla_ansiedad <- table(educacion, ansiedad)
tabla_ansiedad
```


### ¬øC√≥mo se calcula la prevalencia?

Queremos saber qu√© proporci√≥n de personas de cada nivel educativo report√≥ ansiedad. Para eso, **normalizamos por fila**: calculamos proporciones **dentro de cada grupo**.

```{r}
#| label: prevalencia-por-grupo
#| tbl-cap: "Prevalencia de ansiedad por nivel educativo"

prevalencias <- prop.table(tabla_ansiedad, margin = 1)
round(prevalencias, 2)
```

Ahora vemos que:

* En el grupo de educaci√≥n b√°sica, el 37.5% report√≥ ansiedad.
* En el grupo medio, el 25%.
* En el grupo superior, solo el 12.5%.

Estas proporciones **son las prevalencias** de ansiedad en cada grupo.

### Visualizar una tabla de prevalencia

Un gr√°fico de barras permite ver esto claramente:

```{r}
#| label: grafico-prevalencia
#| fig-cap: "Prevalencia de ansiedad por nivel educativo"

library(tidyverse)

datos_prev <- as.data.frame(tabla_ansiedad) |>
  group_by(educacion) |>
  mutate(Prevalencia = Freq / sum(Freq)) |>
  filter(ansiedad == "S√≠")

ggplot(datos_prev, aes(x = educacion, y = Prevalencia)) +
  geom_col(fill = "tomato") +
  scale_y_continuous(labels = scales::percent) +
  labs(title = "Prevalencia de ansiedad por nivel educativo",
       x = "Nivel educativo",
       y = "Prevalencia (porcentaje)") +
  theme_minimal(base_size = 14)
```


### ¬øC√≥mo s√© si estoy viendo una tabla de prevalencia?

Muy f√°cil. Preguntate:

* ¬øEstoy viendo **qu√© porcentaje de cada grupo** presenta cierta condici√≥n?
* ¬øLas proporciones est√°n calculadas por **fila**?

Si la respuesta es s√≠, **est√°s frente a una tabla de prevalencia**.

Y ahora viene lo m√°s importante:

> **Nunca confundas una tabla de prevalencia con una tabla de distribuci√≥n general.**

Porque si alguien te dice:

> ‚ÄúLa mayor√≠a de las personas con ansiedad tienen educaci√≥n b√°sica‚Äù,
> eso podr√≠a ser cierto simplemente porque hay **m√°s personas con ese nivel educativo**.

Pero eso **no significa** que ese grupo tenga **mayor prevalencia**. Por eso, **es clave identificar el tipo de tabla** que est√°s mirando. Y saber **desde qu√© total est√°n calculadas las proporciones**.

Excelente. Esta secci√≥n va a mostrar con claridad c√≥mo **dos tablas con los mismos n√∫meros absolutos** pueden generar interpretaciones muy distintas, dependiendo de c√≥mo se estructuren las proporciones. Es un momento ideal para profundizar en la lectura cr√≠tica y el concepto de condicionalidad.


## Dos historias, una tabla: c√≥mo el mismo dato puede decir cosas distintas

Supongamos que ten√©s la siguiente tabla. Es simple, clara, y 100% realista. En alg√∫n momento de tu formaci√≥n (o carrera), vas a encontrarte con algo parecido:

```{r}
#| label: tabla-ejemplo-comp
#| tbl-cap: "Casos de ansiedad por nivel educativo"

tabla <- matrix(c(15, 25,
                  10, 30,
                  5, 35),
                nrow = 3, byrow = TRUE)

dimnames(tabla) <- list(
  Nivel_educativo = c("B√°sico", "Medio", "Superior"),
  Ansiedad = c("S√≠", "No")
)

tabla <- as.table(tabla)
tabla
```

Esta tabla muestra cu√°ntas personas de cada nivel educativo reportaron ansiedad cl√≠nica (‚ÄúS√≠‚Äù) o no (‚ÄúNo‚Äù). A simple vista, podr√≠as pensar que el grupo de educaci√≥n b√°sica tiene m√°s casos de ansiedad que el de nivel medio o superior. Pero, ¬øeso significa que la ansiedad es m√°s prevalente en ese grupo?

Depende. De **c√≥mo leas la tabla**.


### üß≠ Historia 1: la tabla de prevalencia

Vamos a calcular **proporciones por fila**, es decir, respecto al total de personas **dentro de cada grupo educativo**:

```{r}
#| label: proporciones-filas-comp
#| tbl-cap: "Proporciones por fila: prevalencia de ansiedad por nivel educativo"

prop_fila <- prop.table(tabla, margin = 1)
round(prop_fila, 2)
```

Y ah√≠ vemos:

* 37.5% de ansiedad en educaci√≥n b√°sica
* 25% en educaci√≥n media
* 12.5% en educaci√≥n superior

**Historia 1:** la ansiedad es m√°s prevalente entre personas con menor nivel educativo. Cuanto mayor el nivel, menor la prevalencia.

> Esta es una tabla de **prevalencia**.


### üß≠ Historia 2: proporciones por columna

Ahora miremos la misma tabla, pero calculando **proporciones por columna**, es decir, respecto al total de personas que **respondieron ‚ÄúS√≠‚Äù o ‚ÄúNo‚Äù**:

```{r}
#| label: proporciones-columnas-comp
#| tbl-cap: "Proporciones por columna: distribuci√≥n del nivel educativo dentro de cada respuesta"

prop_col <- prop.table(tabla, margin = 2)
round(prop_col, 2)
```

Y ahora vemos otra historia:

* De todas las personas con ansiedad (‚ÄúS√≠‚Äù), el 50% tiene educaci√≥n b√°sica
* El 33% tiene educaci√≥n media
* El 17% tiene educaci√≥n superior

**Historia 2:** la mayor√≠a de las personas con ansiedad tienen bajo nivel educativo.

> Esta es una tabla de **distribuci√≥n condicional inversa**: qu√© tipo de personas hay entre los que dijeron ‚Äús√≠‚Äù.

### üß† ¬øCu√°l est√° ‚Äúbien‚Äù?

Las dos son v√°lidas. Y las dos cuentan cosas distintas.

* La **tabla de prevalencia** (por fila) te dice c√≥mo **afecta** una condici√≥n a un grupo.
* La **tabla por columna** te dice **qui√©nes componen** una categor√≠a de respuesta.

El problema no est√° en cu√°l tabla us√°s, sino en **creer que una te est√° diciendo lo que en realidad dice la otra**.

### Visualizar ambas historias

#### Historia 1: prevalencia

```{r}
#| label: grafico-prevalencia-comp
#| fig-cap: "Prevalencia de ansiedad por nivel educativo (proporciones por fila)"

df_fila <- as.data.frame(prop_fila)

ggplot(df_fila[df_fila$Ansiedad == "S√≠", ], aes(x = Nivel_educativo, y = Freq)) +
  geom_col(fill = "steelblue") +
  scale_y_continuous(labels = scales::percent) +
  labs(title = "Prevalencia de ansiedad por nivel educativo",
       x = "Nivel educativo", y = "Prevalencia") +
  theme_minimal(base_size = 14)
```

#### Historia 2: composici√≥n del grupo ansioso

```{r}
#| label: grafico-columna-comp
#| fig-cap: "Distribuci√≥n del nivel educativo entre quienes reportaron ansiedad (proporciones por columna)"

df_col <- as.data.frame(prop_col)

ggplot(df_col[df_col$Ansiedad == "S√≠", ], aes(x = Nivel_educativo, y = Freq)) +
  geom_col(fill = "darkred") +
  scale_y_continuous(labels = scales::percent) +
  labs(title = "¬øQui√©nes componen el grupo con ansiedad?",
       x = "Nivel educativo", y = "Porcentaje dentro de la columna 'S√≠'") +
  theme_minimal(base_size = 14)
```

## Lo que ves depende de c√≥mo mir√°s

Este es uno de los momentos clave del cap√≠tulo. La misma tabla puede sostener **dos narrativas distintas**, ambas basadas en n√∫meros reales, pero con √©nfasis diferente. Y si no sab√©s cu√°l est√°s leyendo, pod√©s llegar a conclusiones **opuestas** sin darte cuenta.


## ¬øQu√© porcentaje de qu√©? Pensar en condicionales

Las proporciones no son neutrales. Siempre est√°n **condicionadas a algo**. Decir que ‚Äúel 30% de las personas tienen ansiedad‚Äù no es lo mismo que decir ‚Äúel 30% de las personas con ansiedad son estudiantes‚Äù.

A simple vista, ambas frases parecen similares. Pero est√°n diciendo cosas completamente distintas.

Esta distinci√≥n no es un detalle t√©cnico. Es una **herramienta fundamental para pensar correctamente en datos categ√≥ricos**. Y es una de las fuentes m√°s comunes de confusi√≥n en psicolog√≠a, salud y ciencias sociales.

### Dos preguntas, dos tablas

Volvamos al ejemplo anterior con ansiedad y nivel educativo. Record√° que ten√≠amos la siguiente tabla:

```{r}
#| label: tabla-condicional-base
#| tbl-cap: "Casos de ansiedad por nivel educativo"

tabla
```

A partir de esta tabla, pod√©s hacer dos preguntas:

* **P1.** Entre las personas de nivel educativo *b√°sico*, ¬øqu√© proporci√≥n tiene ansiedad?
* **P2.** Entre las personas con *ansiedad*, ¬øqu√© proporci√≥n tiene nivel educativo *b√°sico*?

Las dos preguntas son v√°lidas. Pero **est√°n invirtiendo la condicionalidad**.

### Proporciones por fila (P1)

```{r}
#| label: proporciones-fila-cond
#| tbl-cap: "Proporciones por fila: ¬øqui√©n tiene ansiedad dentro de cada grupo educativo?"

prop_fila
```

Esta tabla responde a la primera pregunta: **¬øqu√© porcentaje de cada grupo educativo tiene ansiedad?**

> Es decir: ‚ÄúDado el grupo, ¬øcu√°l es la respuesta?‚Äù


### Proporciones por columna (P2)

```{r}
#| label: proporciones-col-cond
#| tbl-cap: "Proporciones por columna: ¬øde qu√© grupo educativo son quienes tienen ansiedad?"

prop_col
```

Esta tabla responde a la segunda pregunta: **¬øqu√© porcentaje de las personas con ansiedad pertenece a cada grupo educativo?**

> Es decir: ‚ÄúDada la respuesta, ¬øde d√≥nde viene?‚Äù


### No confundas estas dos

Esto puede parecer obvio en teor√≠a, pero en la pr√°ctica se confunde todo el tiempo. Y las consecuencias son reales. Por ejemplo:

* Pod√©s tener una condici√≥n que afecta proporcionalmente m√°s a un grupo (mayor **prevalencia**)‚Ä¶
  ‚Ä¶pero que est√° compuesta en su mayor√≠a por otro grupo (mayor **peso absoluto**).

* Pod√©s pensar que hay una ‚Äúrelaci√≥n fuerte‚Äù entre dos variables, solo porque no est√°s viendo **desde qu√© total** se calcul√≥ cada proporci√≥n.


### ¬øC√≥mo saber cu√°l est√°s viendo?

Buena pr√°ctica: **mir√° c√≥mo est√°n normalizadas las proporciones**. Si cada fila suma 1 (o 100%), entonces est√°s viendo proporciones **condicionales al grupo**.
Si cada columna suma 1, entonces est√°s viendo proporciones **condicionales a la respuesta**.

Visualmente, pod√©s graficarlo as√≠:

#### ¬øQu√© porcentaje tiene ansiedad dentro de cada grupo?

```{r}
#| label: grafico-fila-cond
#| fig-cap: "Proporciones condicionales por grupo educativo (fila)"

df_f <- as.data.frame(prop_fila)

ggplot(df_f, aes(x = Nivel_educativo, y = Freq, fill = Ansiedad)) +
  geom_col(position = "fill") +
  scale_y_continuous(labels = scales::percent) +
  labs(title = "¬øQu√© porcentaje tiene ansiedad dentro de cada grupo educativo?",
       y = "Proporci√≥n dentro del grupo", x = "Nivel educativo") +
  theme_minimal(base_size = 14)
```

#### ¬øDe qu√© grupo vienen quienes tienen ansiedad?

```{r}
#| label: grafico-col-cond
#| fig-cap: "Proporciones condicionales dentro del grupo que report√≥ ansiedad (columna)"

df_c <- as.data.frame(prop_col)

ggplot(df_c, aes(x = Ansiedad, y = Freq, fill = Nivel_educativo)) +
  geom_col(position = "fill") +
  scale_y_continuous(labels = scales::percent) +
  labs(title = "¬øDe qu√© grupo educativo vienen quienes tienen ansiedad?",
       y = "Proporci√≥n dentro de cada respuesta", x = "Respuesta") +
  theme_minimal(base_size = 14)
```

### Entender condicionales ‚â† solo leer bien

Entender bien las proporciones condicionales no solo evita errores. Tambi√©n te entrena para algo m√°s grande: **pensar en t√©rminos de relaciones causales, probabil√≠sticas y contextuales**. Algo que vas a necesitar en casi todo lo que viene despu√©s.

Perfecto, vamos con la secci√≥n sobre **incidencia**, diferenci√°ndola cuidadosamente de la **prevalencia**, usando un tono narrativo y orientado a ejemplos en psicolog√≠a, como siempre.

## Incidencia: cuando contar tambi√©n implica tiempo

Hasta ahora ven√≠amos pregunt√°ndonos cu√°ntas personas tienen algo.
Pero en muchos casos, la pregunta m√°s importante no es qui√©n **tiene**, sino qui√©n **empez√≥ a tener**.

Esa diferencia ‚Äîsutil pero crucial‚Äî nos lleva a un nuevo concepto: la **incidencia**.

### ¬øQu√© es la incidencia?

La incidencia es la proporci√≥n de **nuevos casos** de una condici√≥n que aparecen en una poblaci√≥n durante un per√≠odo determinado de tiempo.

Si la prevalencia te dice **cu√°ntas personas tienen ansiedad ahora**, la incidencia te dice **cu√°ntas personas desarrollaron ansiedad desde la √∫ltima vez que mediste**.

### ¬øPor qu√© importa?

Porque no es lo mismo que muchas personas tengan algo, a que muchas personas **empiecen a tenerlo**.

Un trastorno puede tener:

* **Alta prevalencia y baja incidencia**: por ejemplo, una condici√≥n cr√≥nica que pocas personas desarrollan, pero que dura mucho tiempo (como la esquizofrenia).
* **Baja prevalencia y alta incidencia**: por ejemplo, una reacci√≥n aguda y breve que mucha gente experimenta pero que se resuelve r√°pido (como ataques de p√°nico en situaciones espec√≠ficas).

Y eso cambia radicalmente lo que entendemos del fen√≥meno.

### Ejemplo: ansiedad en estudiantes al empezar el semestre

Supongamos que medimos ansiedad cl√≠nica en una muestra de estudiantes **al comienzo** y **al final** del primer mes del semestre. De los 100 estudiantes:

* 10 ya ten√≠an ansiedad cuando comenz√≥ el semestre ‚Üí **prevalencia al inicio**.
* 15 desarrollaron ansiedad durante el primer mes ‚Üí **incidencia en el primer mes**.

Esto nos dice que hubo 15 nuevos casos, y que la **incidencia mensual** fue del 15%.


### Diferencias en visualizaci√≥n

Para mostrar estas diferencias, necesitamos saber **cu√°ndo** se midi√≥ cada cosa.

```{r}
#| label: incidencia-ejemplo
#| echo: true

library(tibble)

estudiantes <- tibble(
  ID = 1:100,
  Ansiedad_inicio = c(rep("S√≠", 10), rep("No", 90)),
  Ansiedad_mes1 = c(rep("S√≠", 10), rep("S√≠", 15), rep("No", 75))
)

tabla_cambios <- table(estudiantes$Ansiedad_inicio, estudiantes$Ansiedad_mes1)
dimnames(tabla_cambios) <- list("Inicio" = c("No", "S√≠"), "Mes1" = c("No", "S√≠"))
tabla_cambios
```

Esto muestra cu√°ntas personas **desarrollaron ansiedad** (de ‚ÄúNo‚Äù a ‚ÄúS√≠‚Äù) durante el mes.

### Calcular la incidencia

```{r}
#| label: incidencia-calculo
#| tbl-cap: "Incidencia de ansiedad: nuevos casos durante el mes"

# Casos que pasaron de No a S√≠
casos_nuevos <- tabla_cambios["No", "S√≠"]

# Total de personas que no ten√≠an ansiedad al inicio
poblacion_riesgo <- sum(tabla_cambios["No", ])

incidencia <- casos_nuevos / poblacion_riesgo
round(incidencia, 2)
```

> Resultado: **15 de 90 personas** sin ansiedad al inicio desarrollaron ansiedad en el primer mes.
> La incidencia fue del **17%**.


### Comparar no es mezclar

Una tabla puede mostrarte:

* la **prevalencia actual**, si te dice ‚Äúcu√°ntos tienen ansiedad ahora‚Äù;
* o la **incidencia**, si te muestra ‚Äúcu√°ntos nuevos casos hubo entre los que no ten√≠an‚Äù.

Si no sab√©s cu√°l es cu√°l, pod√©s **malinterpretar el fen√≥meno**. Por ejemplo, pod√©s pensar que un tratamiento fue efectivo porque baj√≥ la prevalencia, sin darte cuenta de que la incidencia sigue siendo alta.

## Lo que cuentan las tablas‚Ä¶ y lo que no

A lo largo de este cap√≠tulo recorrimos un camino que parece sencillo: contar cosas. Pero con cada paso, ese conteo se volvi√≥ m√°s rico, m√°s preciso‚Ä¶ y tambi√©n m√°s propenso a malinterpretaciones.

Aprendimos que no todas las frecuencias son iguales. Que contar puede significar:

* simplemente saber **cu√°ntos casos hay** (frecuencia absoluta),
* o **qu√© proporci√≥n representan** (frecuencia relativa y porcentual),
* o incluso, en casos con orden, **cu√°ntos est√°n por debajo de cierto umbral** (frecuencia acumulada).

Vimos que cuando dos variables se cruzan, todo se vuelve m√°s interesante ‚Äîy m√°s confuso. Que no basta con ver los n√∫meros: hay que saber **desde qu√© total se est√°n leyendo**.

Nos enfrentamos a la diferencia entre **prevalencia** e **incidencia**, entre contar lo que hay y contar lo que empieza a haber. Entre saber **cu√°ntos** y saber **cu√°ndo**.

Y, sobre todo, aprendimos algo fundamental:

> **Los n√∫meros en una tabla no hablan por s√≠ solos.**
> Necesitan contexto. Direcci√≥n. Una lectura cuidadosa.

## ¬øY si lo que vemos es solo azar?

Al final de este recorrido, aparece una nueva inquietud. Una que viene acechando desde el principio, aunque no la hayamos dicho en voz alta:

> *¬øY si las diferencias que veo en esta tabla se deben simplemente al azar?*

Cuando ves que un grupo tiene m√°s casos que otro‚Ä¶
Cuando una categor√≠a aparece con m√°s frecuencia‚Ä¶
Cuando una proporci√≥n parece desbalanceada‚Ä¶

‚Ä¶ ¬øc√≥mo sab√©s que eso no es simplemente un efecto de la muestra? ¬øDe c√≥mo justo se dieron los datos?

Ah√≠ es donde empieza la **inferencia estad√≠stica**.

No porque los datos no alcancen, sino porque queremos ir m√°s all√°.
No para complicarnos, sino para poder decir con mayor confianza:

> *‚Äúesto que vemos no es casualidad‚Äù*.


Y eso, precisamente, es lo que vamos a empezar a explorar en el pr√≥ximo cap√≠tulo.

Pero antes de probar nada, hay que saber c√≥mo se mide una diferencia.
Y para eso, necesitamos dar otro paso.

