<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matthew J. C. Crump">

<title>3&nbsp; Correlaci√≥n ‚Äì Respondiendo preguntas con datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-SamplesPopulations.html" rel="next">
<link href="./02-Describing_Data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la b√∫squeda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1116FZ99DZ"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-1116FZ99DZ', { 'anonymize_ip': true});
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="3&nbsp; Correlaci√≥n ‚Äì Respondiendo preguntas con datos">
<meta property="og:description" content="Traducido al espa√±ol rioplatense por ChatGPT4-o bajo la supervisi√≥n de √Ålvaro Cabana.">
<meta property="og:site_name" content="Respondiendo preguntas con datos">
<meta name="twitter:title" content="3&nbsp; Correlaci√≥n ‚Äì Respondiendo preguntas con datos">
<meta name="twitter:description" content="A free textbook teaching introductory statistics for undergraduates in psychology, including a lab manual, and course website. Licensed on CC BY SA 4.0">
<meta name="twitter:image" content="https://crumplab.com/statistics/imgs/TextbookCover.png">
<meta name="twitter:site" content="@MattCrumpLab">
<meta name="twitter:card" content="summary">
<meta name="twitter:image-height" content="1310">
<meta name="twitter:image-width" content="916">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-Correlation.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Correlaci√≥n</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Respondiendo preguntas con datos</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/CrumpLab/statistics/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-Science_Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">¬øPor qu√© estad√≠stica?</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-Describing_Data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Describir los datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-Correlation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Correlaci√≥n</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-SamplesPopulations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Probability, Sampling, and Estimation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-Foundation_Inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Foundations for inference</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-ttests.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">t-tests</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-ANOVA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-RMANOVA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Repeated Measures ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-FactorialANOVA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Factorial ANOVA</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-MixedANOVA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">More On Factorial Designs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-Simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Simulating Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-Thinking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Thinking about answering questions with data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-Gifs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">GIFs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#si-algo-causara-que-otra-cosa-cambie-c√≥mo-se-ver√≠a-eso" id="toc-si-algo-causara-que-otra-cosa-cambie-c√≥mo-se-ver√≠a-eso" class="nav-link active" data-scroll-target="#si-algo-causara-que-otra-cosa-cambie-c√≥mo-se-ver√≠a-eso"><span class="header-section-number">3.1</span> Si algo causara que otra cosa cambie, ¬øc√≥mo se ver√≠a eso?</a>
  <ul class="collapse">
  <li><a href="#charlie-y-la-f√°brica-de-chocolate" id="toc-charlie-y-la-f√°brica-de-chocolate" class="nav-link" data-scroll-target="#charlie-y-la-f√°brica-de-chocolate"><span class="header-section-number">3.1.1</span> Charlie y la f√°brica de chocolate</a></li>
  <li><a href="#diagramas-de-dispersi√≥n" id="toc-diagramas-de-dispersi√≥n" class="nav-link" data-scroll-target="#diagramas-de-dispersi√≥n"><span class="header-section-number">3.1.2</span> Diagramas de dispersi√≥n</a></li>
  <li><a href="#correlaci√≥n-positiva-negativa-y-nula" id="toc-correlaci√≥n-positiva-negativa-y-nula" class="nav-link" data-scroll-target="#correlaci√≥n-positiva-negativa-y-nula"><span class="header-section-number">3.1.3</span> Correlaci√≥n positiva, negativa y nula</a></li>
  </ul></li>
  <li><a href="#el-r-de-pearson" id="toc-el-r-de-pearson" class="nav-link" data-scroll-target="#el-r-de-pearson"><span class="header-section-number">3.2</span> El <em>r</em> de Pearson</a>
  <ul class="collapse">
  <li><a href="#la-idea-de-la-covarianza" id="toc-la-idea-de-la-covarianza" class="nav-link" data-scroll-target="#la-idea-de-la-covarianza"><span class="header-section-number">3.2.1</span> La idea de la covarianza</a></li>
  </ul></li>
  <li><a href="#convertir-los-n√∫meros-en-una-medida-de-covarianza" id="toc-convertir-los-n√∫meros-en-una-medida-de-covarianza" class="nav-link" data-scroll-target="#convertir-los-n√∫meros-en-una-medida-de-covarianza"><span class="header-section-number">3.3</span> Convertir los n√∫meros en una medida de covarianza</a>
  <ul class="collapse">
  <li><a href="#la-covarianza-como-medida" id="toc-la-covarianza-como-medida" class="nav-link" data-scroll-target="#la-covarianza-como-medida"><span class="header-section-number">3.3.1</span> La covarianza como medida</a></li>
  <li><a href="#ya-llegamos-al-r-de-pearson" id="toc-ya-llegamos-al-r-de-pearson" class="nav-link" data-scroll-target="#ya-llegamos-al-r-de-pearson"><span class="header-section-number">3.3.2</span> ¬øYa llegamos al <em>r</em> de Pearson?</a></li>
  </ul></li>
  <li><a href="#ejemplos-con-datos" id="toc-ejemplos-con-datos" class="nav-link" data-scroll-target="#ejemplos-con-datos"><span class="header-section-number">3.4</span> Ejemplos con datos</a></li>
  <li><a href="#regresi√≥n-una-mini-introducci√≥n" id="toc-regresi√≥n-una-mini-introducci√≥n" class="nav-link" data-scroll-target="#regresi√≥n-una-mini-introducci√≥n"><span class="header-section-number">3.5</span> Regresi√≥n: una mini introducci√≥n</a>
  <ul class="collapse">
  <li><a href="#la-l√≠nea-de-mejor-ajuste" id="toc-la-l√≠nea-de-mejor-ajuste" class="nav-link" data-scroll-target="#la-l√≠nea-de-mejor-ajuste"><span class="header-section-number">3.5.1</span> La l√≠nea de mejor ajuste</a></li>
  <li><a href="#l√≠neas" id="toc-l√≠neas" class="nav-link" data-scroll-target="#l√≠neas"><span class="header-section-number">3.5.2</span> L√≠neas</a></li>
  <li><a href="#calcular-la-l√≠nea-de-mejor-ajuste" id="toc-calcular-la-l√≠nea-de-mejor-ajuste" class="nav-link" data-scroll-target="#calcular-la-l√≠nea-de-mejor-ajuste"><span class="header-section-number">3.5.3</span> Calcular la l√≠nea de mejor ajuste</a></li>
  </ul></li>
  <li><a href="#interpretar-correlaciones" id="toc-interpretar-correlaciones" class="nav-link" data-scroll-target="#interpretar-correlaciones"><span class="header-section-number">3.6</span> Interpretar correlaciones</a>
  <ul class="collapse">
  <li><a href="#correlaci√≥n-no-implica-causalidad" id="toc-correlaci√≥n-no-implica-causalidad" class="nav-link" data-scroll-target="#correlaci√≥n-no-implica-causalidad"><span class="header-section-number">3.6.1</span> Correlaci√≥n no implica causalidad</a></li>
  <li><a href="#correlaci√≥n-y-el-azar" id="toc-correlaci√≥n-y-el-azar" class="nav-link" data-scroll-target="#correlaci√≥n-y-el-azar"><span class="header-section-number">3.6.2</span> Correlaci√≥n y el azar</a></li>
  <li><a href="#el-tama√±o-de-muestra-reduce-el-poder-del-azar" id="toc-el-tama√±o-de-muestra-reduce-el-poder-del-azar" class="nav-link" data-scroll-target="#el-tama√±o-de-muestra-reduce-el-poder-del-azar"><span class="header-section-number">3.6.3</span> El tama√±o de muestra reduce el poder del azar</a></li>
  <li><a href="#algunas-pel√≠culas-m√°s" id="toc-algunas-pel√≠culas-m√°s" class="nav-link" data-scroll-target="#algunas-pel√≠culas-m√°s"><span class="header-section-number">3.6.4</span> Algunas pel√≠culas m√°s</a></li>
  <li><a href="#ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-realmente-hay-una-correlaci√≥n" id="toc-ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-realmente-hay-una-correlaci√≥n" class="nav-link" data-scroll-target="#ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-realmente-hay-una-correlaci√≥n"><span class="header-section-number">3.6.5</span> Ver c√≥mo se comporta la correlaci√≥n cuando realmente <strong>hay</strong> una correlaci√≥n</a></li>
  </ul></li>
  <li><a href="#resumen" id="toc-resumen" class="nav-link" data-scroll-target="#resumen"><span class="header-section-number">3.7</span> Resumen</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/CrumpLab/statistics/edit/master/03-Correlation.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta p√°gina</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Correlaci√≥n</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>Matthew J. C. Crump </p>
          </div>
  </div>
    
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Notas</div>
    Traducido al espa√±ol rioplatense por ChatGPT4-o bajo la supervisi√≥n de √Ålvaro Cabana.
  </div>
</div>


</header>


<blockquote class="blockquote">
<p>La correlaci√≥n no implica causalidad<br>
‚ÄîTodo docente de Estad√≠stica y M√©todos de Investigaci√≥n, alguna vez</p>
</blockquote>
<p>En el cap√≠tulo anterior ten√≠amos un conjunto de datos. Era demasiado para mirar y no ten√≠a mucho sentido. As√≠ que hablamos de c√≥mo visualizar los datos usando gr√°ficos e histogramas, y de c√≥mo resumir un mont√≥n de n√∫meros para determinar su tendencia central (lo com√∫n) y su variabilidad (lo diferente). Y todo estaba bien en el mundo.</p>
<p>Pero no olvidemos la gran raz√≥n por la que aprendimos sobre estad√≠sticas descriptivas. La gran raz√≥n es que estamos interesados en responder preguntas usando datos.</p>
<p>Si est√°s buscando un tema central para tener en mente durante este curso, es este: <strong>¬øc√≥mo hacemos para formular y responder preguntas usando datos?</strong></p>
<p>En cada secci√≥n del libro, deber√≠as conectar ese di√°logo interno con esta pregunta, y pensar: <em>¬øc√≥mo lo que estoy aprendiendo me ayuda a responder preguntas con datos?</em><br>
Advertencia anticipada: sabemos que es f√°cil olvidarse de esto cuando nos metemos en los detalles, as√≠ que vamos a intentar tirarte una cuerda cada tanto‚Ä¶ record√°: estamos tratando de responder preguntas con datos.</p>
<p>En el cap√≠tulo dos empezamos con unos datos ficticios sobre la felicidad humana, ¬øte acord√°s? Imaginamos que le ped√≠amos a muchas personas que nos dijeran cu√°n felices se sent√≠an, y luego mir√°bamos los n√∫meros que nos daban. Sigamos con ese experimento mental imaginario.</p>
<p>¬øQu√© obten√©s cuando le ped√≠s a la gente que use un n√∫mero para describir cu√°n feliz est√°? Un mont√≥n de n√∫meros. ¬øQu√© tipo de preguntas pod√©s hacer con esos n√∫meros? Bueno, pod√©s mirar los valores y estimar sus propiedades generales, como ya hicimos. Esperamos que esos n√∫meros nos digan cosas que m√°s o menos ya sabemos. Que hay personas diferentes, y que cada persona tiene un nivel diferente de felicidad.</p>
<p>Probablemente conociste a algunas personas realmente felices, y otras realmente infelices, y vos tambi√©n seguramente tengas alg√∫n nivel de felicidad. ‚ÄúBuen√≠simo, ¬°chocolate por la noticia!‚Äù.</p>
<p>Antes de seguir, tambi√©n deber√≠as tener una actitud cr√≠tica respecto a qu√© significan esos n√∫meros. Por ejemplo, si forz√°s a las personas a calificar su felicidad con un n√∫mero entre 0 y 100, ¬øese n√∫mero refleja realmente cu√°n felices son? ¬øPuede una persona saber cu√°n feliz est√°? ¬øEl formato de la pregunta influye en la respuesta? ¬øLa felicidad es siquiera algo real?<br>
Estas son todas preguntas v√°lidas sobre la <strong>validez</strong> del constructo (la felicidad misma) y del instrumento de medida (los n√∫meros) que est√°s usando para cuantificarlo. Pero por ahora vamos a dejar esas preguntas importantes de lado, y vamos a asumir que la felicidad existe, y que nuestra medida de felicidad refleja algo sobre cu√°n feliz est√° la gente.</p>
<p>Bien. Una vez que medimos algo de felicidad, seguro se te ocurren preguntas m√°s importantes. Por ejemplo, ¬øqu√© cosas hacen que la felicidad suba o baje? Si supieras qu√© la causa, ¬øqu√© podr√≠as hacer? Podr√≠as aumentar tu propia felicidad; o ayudar a personas que est√°n infelices; o entender por qu√© √çgor, el burrito de <em>Winnie the Pooh</em>, est√° siempre bajoneado; o presentar argumentos cient√≠ficos v√°lidos contra afirmaciones err√≥neas sobre las causas de la felicidad. Una teor√≠a causal y un entendimiento de la felicidad servir√≠an para todo eso. Entonces, ¬øc√≥mo llegamos ah√≠?</p>
<p>Imagin√° que sos una observadora alien√≠gena. Lleg√°s a la Tierra y escuch√°s hablar de esta cosa llamada ‚Äúfelicidad‚Äù que tienen las personas. Quer√©s saber qu√© la causa. Tambi√©n descubr√≠s que en el planeta Tierra hay muchas otras cosas. ¬øCu√°les de todas esas cosas ‚Äîte pregunt√°s‚Äî causan la felicidad? ¬øC√≥mo har√≠as, siendo una alien√≠gena, para empezar a responder esa pregunta gigante?</p>
<p>Como persona que tiene felicidad, quiz√°s ya tengas algunas corazonadas sobre qu√© la hace cambiar. Por ejemplo: el clima, las amistades, la m√∫sica, el dinero, la educaci√≥n, las drogas, los libros, las pel√≠culas, las creencias, la personalidad, el color de tus zapatos, el largo de tus cejas, cu√°ntos gatos ves por d√≠a, cu√°ntas veces se demora el subte, una provisi√≥n de por vida de chocolate, etc√©tera, etc√©tera (como dir√≠a Willy Wonka), podr√≠an contribuir de alguna forma a la felicidad. Podr√≠a haber muchas causas distintas de la felicidad.</p>
<section id="si-algo-causara-que-otra-cosa-cambie-c√≥mo-se-ver√≠a-eso" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="si-algo-causara-que-otra-cosa-cambie-c√≥mo-se-ver√≠a-eso"><span class="header-section-number">3.1</span> Si algo causara que otra cosa cambie, ¬øc√≥mo se ver√≠a eso?</h2>
<p>Antes de salir a buscar las causas de la felicidad, deber√≠amos prepararnos con algunas herramientas anal√≠ticas que nos permitan identificar c√≥mo se ve una relaci√≥n causal. Si no nos preparamos para lo que podr√≠amos encontrar, no vamos a saber c√≥mo interpretar nuestros propios datos. En cambio, necesitamos anticipar c√≥mo se ver√≠an esos datos. En concreto, necesitamos saber c√≥mo lucen los datos cuando una cosa <em>no causa</em> a otra, y c√≥mo lucen cuando <em>s√≠</em> la causa. Este cap√≠tulo trata justamente de esa preparaci√≥n. Advertencia: vamos a descubrir cosas complejas. Por ejemplo, hay patrones que <em>parecen</em> mostrar que una cosa causa a otra, incluso cuando en realidad <strong>no la causa</strong>. Aguant√°, ya vamos a verlo.</p>
<section id="charlie-y-la-f√°brica-de-chocolate" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="charlie-y-la-f√°brica-de-chocolate"><span class="header-section-number">3.1.1</span> Charlie y la f√°brica de chocolate</h3>
<p>Imaginemos que la cantidad de chocolate que tiene una persona tiene una influencia causal sobre su nivel de felicidad. Sigamos imaginando que, como Charlie, cuanto m√°s chocolate ten√©s, m√°s feliz sos; y cuanto menos chocolate, menos feliz. Por √∫ltimo, como sospechamos que la felicidad depende tambi√©n de muchas otras cosas en la vida de una persona, anticipamos que la relaci√≥n entre el suministro de chocolate y la felicidad no va a ser perfecta. ¬øQu√© significan estas suposiciones para c√≥mo deber√≠an verse los datos?</p>
<p>El primer paso es recolectar unos datos imaginarios de 100 personas. Caminamos por ah√≠ y le pedimos a las primeras 100 personas que respondan dos preguntas:</p>
<ol type="1">
<li>¬øCu√°nto chocolate ten√©s?<br>
</li>
<li>¬øCu√°n feliz est√°s?</li>
</ol>
<p>Para hacerlo m√°s sencillo, ambas escalas van de 0 a 100. En la escala de chocolate, 0 significa ‚Äúsin chocolate‚Äù y 100 significa ‚Äúsuministro vitalicio de chocolate‚Äù. Cualquier otro n√∫mero est√° en el medio. En la escala de felicidad, 0 es ‚Äúnada de felicidad‚Äù, 100 es ‚Äútoda la felicidad‚Äù, y los valores intermedios reflejan distintos grados de felicidad en el medio.</p>
<p>Ac√° ten√©s una muestra de datos de los primeros 10 sujetos imaginarios.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>sujeto <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>chocolate <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>felicidad <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>the_df_CC <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(sujeto,chocolate,felicidad)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>the_df_short <span class="ot">&lt;-</span> the_df_CC[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(the_df_short)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">sujeto</th>
<th style="text-align: right;">chocolate</th>
<th style="text-align: right;">felicidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Le hicimos dos preguntas a cada persona, as√≠ que hay dos valores por persona: uno para su suministro de chocolate, y otro para su nivel de felicidad. Capaz ya not√°s cierta relaci√≥n entre la cantidad de chocolate y el nivel de felicidad en la tabla. Para que esas relaciones se vean a√∫n m√°s claras, vamos a graficar todos los datos.</p>
</section>
<section id="diagramas-de-dispersi√≥n" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="diagramas-de-dispersi√≥n"><span class="header-section-number">3.1.2</span> Diagramas de dispersi√≥n</h3>
<p>Cuando ten√©s dos variables medidas, siempre pod√©s convertirlas en puntos y mostrarlas en un diagrama de dispersi√≥n (<em>scatter plot</em>). Un gr√°fico de dispersi√≥n tiene un eje horizontal (x) y un eje vertical (y). Vos eleg√≠s qu√© variable va en qu√© eje. Vamos a poner el suministro de chocolate en el eje x, y el nivel de felicidad en el eje y. La figura <a href="#fig-3scatter1" class="quarto-xref">Figura&nbsp;<span>3.1</span></a> muestra 100 puntos, uno por cada persona.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(the_df_CC,<span class="fu">aes</span>(<span class="at">x=</span>chocolate,<span class="at">y=</span>felicidad))<span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3scatter1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3scatter1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3scatter1-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3scatter1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.1: Datos imaginarios que muestran una correlaci√≥n positiva entre la cantidad de chocolate y el nivel de felicidad
</figcaption>
</figure>
</div>
</div>
</div>
<p>Capaz te est√©s preguntando: ¬øpor qu√© hay solo 100 puntos en el gr√°fico? ¬øNo recolectamos 100 medidas de chocolate y 100 de felicidad? ¬øNo deber√≠a haber 200 puntos?<br>
No.&nbsp;Cada punto representa a una persona. Hay 100 personas, por lo tanto hay 100 puntos.</p>
<p>¬øQu√© significa cada punto? Cada punto tiene dos coordenadas: una en x (chocolate) y una en y (felicidad). El primer punto, abajo a la izquierda, representa a la primera persona de la tabla, que ten√≠a casi 0 de chocolate y casi 0 de felicidad. Pod√©s mirar cualquier punto y trazar una l√≠nea recta hacia abajo hasta el eje x: eso te dice cu√°n ‚Äúchocolatada‚Äù est√° esa persona. Si traz√°s una l√≠nea recta hacia la izquierda hasta el eje y, eso te dice cu√°n feliz est√°.</p>
<p>Ahora que estamos mirando el gr√°fico de dispersi√≥n, podemos ver muchas cosas. Los puntos est√°n algo esparcidos, ¬øno? De ah√≠ viene el nombre ‚Äúdiagrama de dispersi√≥n‚Äù. Incluso cuando no est√°n tan dispersos, se les sigue llamando as√≠. Capaz porque en la vida real los puntos <em>siempre</em> se dispersan un poco.<br>
M√°s importante todav√≠a: los puntos muestran una relaci√≥n entre el suministro de chocolate y la felicidad. Las personas con menos chocolate tienden a tener menos felicidad, y las que tienen m√°s chocolate tienden a ser m√°s felices. Parece que cuanto m√°s chocolate ten√©s, m√°s feliz sos ‚Äîy viceversa. Este tipo de relaci√≥n se llama <strong>correlaci√≥n positiva</strong>.</p>
</section>
<section id="correlaci√≥n-positiva-negativa-y-nula" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="correlaci√≥n-positiva-negativa-y-nula"><span class="header-section-number">3.1.3</span> Correlaci√≥n positiva, negativa y nula</h3>
<p>Ya que estamos en el negocio de imaginar datos, sigamos imaginando un poco m√°s. Ya imaginamos c√≥mo se ver√≠an los datos si tener m√°s chocolate aumentara la felicidad. Vamos a mostrar eso de nuevo en un momento. Pero, ¬øc√≥mo te imagin√°s que se ver√≠a un gr√°fico de dispersi√≥n si la relaci√≥n fuera al rev√©s, y tener m√°s chocolate <em>disminuyera</em> la felicidad?<br>
¬øO c√≥mo se ver√≠a si <em>no hubiera ninguna relaci√≥n</em> entre la cantidad de chocolate y la felicidad?<br>
Te invitamos a imaginarlo mirando la figura <a href="#fig-3posnegrand" class="quarto-xref">Figura&nbsp;<span>3.2</span></a>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>happiness_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df_positive<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,happiness_x)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>happiness_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">1</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>df_negative<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,happiness_x)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">100</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>happiness_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">100</span>))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>df_random<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,happiness_x)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>all_data<span class="ot">&lt;-</span><span class="fu">rbind</span>(df_positive,df_negative,df_random)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>all_data<span class="ot">&lt;-</span><span class="fu">cbind</span>(all_data,<span class="at">correlation=</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"positiva"</span>,<span class="st">"negativa"</span>,<span class="st">"nula"</span>),<span class="at">each=</span><span class="dv">100</span>))</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_data,<span class="fu">aes</span>(<span class="at">x=</span>chocolate_x,<span class="at">y=</span>happiness_x))<span class="sc">+</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>correlation)<span class="sc">+</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"suministro de chocolate"</span>)<span class="sc">+</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"felicidad"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3posnegrand" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3posnegrand-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3posnegrand-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3posnegrand-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.2: Tres diagramas de dispersi√≥n mostrando una correlaci√≥n negativa, positiva, y ausencia de correlaci√≥n
</figcaption>
</figure>
</div>
</div>
</div>
<p>El primer panel muestra una <strong>correlaci√≥n negativa</strong>. La felicidad disminuye a medida que aumenta el suministro de chocolate. La correlaci√≥n negativa ocurre cuando una variable sube y la otra baja; o sea, cuando tener m√°s de X implica tener menos de Y, y viceversa.</p>
<p>El segundo panel muestra una <strong>correlaci√≥n positiva</strong>. La felicidad aumenta a medida que aumenta el suministro de chocolate. En una correlaci√≥n positiva, ambas cosas suben juntas, o bajan juntas: m√°s de X implica m√°s de Y, y viceversa.</p>
<p>El tercer panel muestra <strong>ausencia de correlaci√≥n</strong>. En este caso, no parece haber ninguna relaci√≥n clara entre el suministro de chocolate y la felicidad. Los puntos est√°n totalmente dispersos ‚Äîel m√°s disperso de todos los gr√°ficos de dispersi√≥n.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Nos estamos metiendo en la idea de que las mediciones de dos cosas pueden estar relacionadas, o correlacionadas entre s√≠. Las relaciones pueden ser m√°s complejas que simplemente ‚Äúsube‚Äù o ‚Äúbaja‚Äù. Por ejemplo, podr√≠amos tener una relaci√≥n en la que los puntos suben en la primera mitad del eje X, y bajan en la segunda.</p>
</div>
</div>
<p>Una correlaci√≥n nula ocurre cuando una cosa no est√° relacionada de ninguna forma con la otra: los cambios en X no tienen ninguna relaci√≥n con los cambios en Y, y viceversa.</p>
</section>
</section>
<section id="el-r-de-pearson" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="el-r-de-pearson"><span class="header-section-number">3.2</span> El <em>r</em> de Pearson</h2>
<p>Si Beyonc√© fuera estad√≠stica, probablemente mirar√≠a estos gr√°ficos de dispersi√≥n y dir√≠a: ‚Äúpong√°mosle un n√∫mero‚Äù. Y nos parece una excelente idea.<br>
Ya aprendimos a calcular estad√≠sticas descriptivas para una sola variable, como el chocolate o la felicidad (medias, varianzas, etc.). Pero, ¬øes posible crear una estad√≠stica descriptiva que resuma la relaci√≥n entre <strong>dos</strong> variables, en un solo n√∫mero? ¬øSe puede? Karl Pearson al rescate.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Las historias sobre la invenci√≥n de distintas estad√≠sticas son muy interesantes. Pod√©s leer m√°s sobre eso en el libro <em>The Lady Tasting Tea</em> <span class="citation" data-cites="salsburg2001lady">(<a href="references.html#ref-salsburg2001lady" role="doc-biblioref">Salsburg 2001</a>)</span>.</p>
</div>
</div>
<p>Existe una estad√≠stica para eso, y Karl Pearson la invent√≥. Hoy en d√≠a todxs la llaman el <strong>r de Pearson</strong>. M√°s adelante veremos que Pearson fue editor de <em>Biometrika</em> en los a√±os 30. Le ten√≠a bastante bronca a otro estad√≠stico famoso, Sir Ronald Fisher (del que tambi√©n vamos a hablar), y se tiraban con estad√≠sticas‚Ä¶ ¬øno podr√≠amos llevarnos bien aunque sea en estad√≠stica?</p>
<p>¬øC√≥mo funciona el <em>r</em> de Pearson? Volvamos a mirar los datos de los primeros 10 sujetos de nuestro experimento ficticio:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">sujeto</th>
<th style="text-align: left;">chocolate</th>
<th style="text-align: left;">felicidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sumas</td>
<td style="text-align: left;">38</td>
<td style="text-align: left;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">Medias</td>
<td style="text-align: left;">3.8</td>
<td style="text-align: left;">3.4</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>¬øQu√© podr√≠amos hacer con estos n√∫meros para obtener un √∫nico valor que resuma la relaci√≥n entre el suministro de chocolate y la felicidad?</p>
<section id="la-idea-de-la-covarianza" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="la-idea-de-la-covarianza"><span class="header-section-number">3.2.1</span> La idea de la covarianza</h3>
<p>‚ÄúPor favor no‚Ä¶ otra vez no uses la palabra <em>varianza</em>‚Äù. S√≠, lo vamos a hacer. Vamos a usar la palabra <em>varianza</em> una y otra vez, hasta que tenga sentido.<br>
Record√° lo que significa la varianza respecto a un conjunto de n√∫meros: significa que los n√∫meros tienen cierta variaci√≥n, que no son todos iguales, que algunos son m√°s grandes y otros m√°s chicos.</p>
<p>Podemos ver que hay varianza en el suministro de chocolate entre los 10 sujetos. Tambi√©n hay varianza en los niveles de felicidad. Y tambi√©n vimos, en el gr√°fico de dispersi√≥n, que la felicidad aumenta cuando aumenta el chocolate ‚Äîuna relaci√≥n positiva, una correlaci√≥n positiva.</p>
<p>¬øQu√© tiene que ver eso con la varianza? Bueno, quiere decir que hay una relaci√≥n entre la varianza en el suministro de chocolate y la varianza en los niveles de felicidad. ¬øNo te parece que ambas medidas var√≠an juntas? Cuando tenemos dos variables que var√≠an juntas, son como una pareja feliz que comparte su varianza. Eso es lo que significa <strong>covarianza</strong>: la idea de que el patr√≥n de variaci√≥n en una medida se comparte con el patr√≥n de variaci√≥n en otra.</p>
<p>La <strong>covarianza</strong> es <strong>muy, muy, muy, muy</strong> importante. Sabemos que al principio puede ser una palabra confusa, especialmente si todav√≠a no te sent√≠s del todo c√≥modo con lo que significa varianza en una sola variable. Sin embargo, tenemos que seguir adelante y usar la idea de covarianza una y otra vez, para que quede bien grabada en tu mente estad√≠stica (s√≠, ya lo dijimos, pero repetir ayuda, es una cosa real).</p>
<blockquote class="blockquote">
<p>üß† Consejo pro: La carrera de tres piernas es una met√°fora de la covarianza. Dos personas se atan una pierna entre s√≠, y luego intentan caminar. Funciona cuando sus piernas se mueven juntas (relaci√≥n positiva). Tambi√©n pueden moverse juntas de forma torpe, por ejemplo cuando una intenta avanzar justo cuando la otra intenta retroceder. Eso tambi√©n es covarianza (pero negativa).<br>
Caminan de forma aleatoria cuando no hay covarianza: cada persona hace lo suyo, sin coordinaci√≥n. Hay mucha varianza, pero la varianza se comparte al azar. Es solo un mont√≥n de piernas movi√©ndose sin lograr nada.</p>
</blockquote>
<blockquote class="blockquote">
<p>üß† Consejo pro #2: Jugar bien a las palmas (paddy-cake) requiere que dos personas coordinen sus acciones. Eso es una covarianza positiva bien compartida.</p>
</blockquote>
</section>
</section>
<section id="convertir-los-n√∫meros-en-una-medida-de-covarianza" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="convertir-los-n√∫meros-en-una-medida-de-covarianza"><span class="header-section-number">3.3</span> Convertir los n√∫meros en una medida de covarianza</h2>
<p>‚ÄúOK, si me dec√≠s que <em>covarianza</em> es otra forma de decir ‚Äòcorrelaci√≥n‚Äô o ‚Äòrelaci√≥n‚Äô entre dos variables, me sirve. Supongo que deber√≠amos tener alguna forma de medir eso.‚Äù Correcto. Volvamos a nuestra tabla‚Ä¶ ¬ønot√°s algo nuevo?</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">sujeto</th>
<th style="text-align: left;">chocolate</th>
<th style="text-align: left;">felicidad</th>
<th style="text-align: left;">Chocolate_X_Felicidad</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">35</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sumas</td>
<td style="text-align: left;">38</td>
<td style="text-align: left;">34</td>
<td style="text-align: left;">158</td>
</tr>
<tr class="even">
<td style="text-align: left;">Medias</td>
<td style="text-align: left;">3.8</td>
<td style="text-align: left;">3.4</td>
<td style="text-align: left;">15.8</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Agregamos una columna nueva, que representa las puntuaciones de Chocolate multiplicadas por las de Felicidad. Cada fila en esa nueva columna es el producto ‚Äîla multiplicaci√≥n entre los puntajes de chocolate y felicidad para esa persona. S√≠, pero ¬øpor qu√© har√≠amos esto?</p>
<p>En el cap√≠tulo anterior te llevamos de vuelta a la escuela primaria para pensar en la divisi√≥n. Ahora vamos a hacer lo mismo con la multiplicaci√≥n. Suponemos que ya sab√©s c√≥mo funciona. Un n√∫mero multiplicado por otro quiere decir que sum√°s el primero tantas veces como indica el segundo:</p>
<p><span class="math inline">\(2*2= 2+2=4\)</span></p>
<p><span class="math inline">\(2*6= 2+2+2+2+2+2 = 12\)</span>, o <span class="math inline">\(6+6=12\)</span>, que es lo mismo.</p>
<p>Todo eso ya lo sab√©s. Pero, ¬øpod√©s usar la multiplicaci√≥n a tu favor y hacer que haga lo que necesit√°s cuando se trata de resumir una covarianza? La multiplicaci√≥n es el droide que est√°s buscando.</p>
<p>Sabemos c√≥mo multiplicar n√∫meros, y lo que tenemos que hacer ahora es pensar en las consecuencias de multiplicar dos conjuntos de n√∫meros. Por ejemplo: ¬øqu√© pasa cuando multiplic√°s dos n√∫meros chicos, en comparaci√≥n con dos n√∫meros grandes? El primer producto deber√≠a ser m√°s chico, ¬øno? ¬øY qu√© pasa si multiplic√°s un n√∫mero chico con uno grande? Los productos deber√≠an quedar en un punto intermedio, ¬øcierto?</p>
<p>El siguiente paso es pensar qu√© pasa cuando sumamos los productos de dos variables, dependiendo de c√≥mo se alinean. Veamos otra tabla:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>the_df_short <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">puntajes=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="at">X=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">Y=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">A=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">B=</span><span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">XY =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span><span class="sc">*</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">AB=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span><span class="sc">*</span><span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>the_df_short <span class="ot">&lt;-</span> the_df_short <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="st">"Sumas"</span>,<span class="fu">colSums</span>(the_df_short[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>]))) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="st">"Medias"</span>,<span class="fu">colMeans</span>(the_df_short[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>])))</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(the_df_short)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">puntajes</th>
<th style="text-align: left;">X</th>
<th style="text-align: left;">Y</th>
<th style="text-align: left;">A</th>
<th style="text-align: left;">B</th>
<th style="text-align: left;">XY</th>
<th style="text-align: left;">AB</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">28</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">36</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">49</td>
<td style="text-align: left;">28</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">64</td>
<td style="text-align: left;">24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">81</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">10</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">100</td>
<td style="text-align: left;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sumas</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">55</td>
<td style="text-align: left;">385</td>
<td style="text-align: left;">220</td>
</tr>
<tr class="even">
<td style="text-align: left;">Medias</td>
<td style="text-align: left;">5.5</td>
<td style="text-align: left;">5.5</td>
<td style="text-align: left;">5.5</td>
<td style="text-align: left;">5.5</td>
<td style="text-align: left;">38.5</td>
<td style="text-align: left;">22</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Observ√° las columnas <span class="math inline">\(X\)</span> y <span class="math inline">\(Y\)</span>. Los valores de <span class="math inline">\(X\)</span> y <span class="math inline">\(Y\)</span> covar√≠an perfectamente. Cuando <span class="math inline">\(X\)</span> es 1, <span class="math inline">\(Y\)</span> tambi√©n es 1; cuando <span class="math inline">\(X\)</span> es 2, <span class="math inline">\(Y\)</span> es 2, y as√≠. Est√°n perfectamente alineados.<br>
Los valores de <span class="math inline">\(A\)</span> y <span class="math inline">\(B\)</span> tambi√©n covar√≠an perfectamente, pero en sentido opuesto. Cuando <span class="math inline">\(A\)</span> es 1, <span class="math inline">\(B\)</span> es 10; cuando <span class="math inline">\(A\)</span> es 2, <span class="math inline">\(B\)</span> es 9, y as√≠. <span class="math inline">\(B\)</span> es una copia invertida de <span class="math inline">\(A\)</span>.</p>
<p>Ahora mir√° la columna <span class="math inline">\(XY\)</span>. Son los productos que obtenemos al multiplicar cada valor de <span class="math inline">\(X\)</span> con el correspondiente valor de <span class="math inline">\(Y\)</span>. Y la columna <span class="math inline">\(AB\)</span> son los productos de <span class="math inline">\(A\)</span> por <span class="math inline">\(B\)</span> en cada fila. Hasta ac√° todo bien.</p>
<p>Ahora observ√° las sumas de las columnas <span class="math inline">\(XY\)</span> y <span class="math inline">\(AB\)</span>. No son iguales. La suma de los productos <span class="math inline">\(XY\)</span> es 385, y la suma de los productos <span class="math inline">\(AB\)</span> es 220. En este conjunto de datos en particular los n√∫meros 385 y 220 son muy importantes. Representan la mayor suma posible de productos (385) y la menor suma posible de productos (220). No hay forma de reordenar los n√∫meros del 1 al 10, digamos para <span class="math inline">\(X\)</span> y para <span class="math inline">\(Y\)</span>, que produzca una suma mayor o menor. ¬øNo me cre√©s? Mir√° esto:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>simulated_sums<span class="ot">&lt;-</span><span class="fu">length</span>(<span class="dv">0</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(sim <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>X<span class="ot">&lt;-</span><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>Y<span class="ot">&lt;-</span><span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>simulated_sums[sim]<span class="ot">&lt;-</span><span class="fu">sum</span>(X<span class="sc">*</span>Y)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>sim_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">sims=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>,simulated_sums)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim_df,<span class="fu">aes</span>(<span class="at">x=</span>sims,<span class="at">y=</span>simulated_sums))<span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">385</span>)<span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">220</span>)<span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"simulaciones"</span>,<span class="at">y=</span><span class="st">"Sumas simuladas"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3simsum" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3simsum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3simsum-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3simsum-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.3: Sumas de productos simuladas que muestran los tipos de valores que pueden producirse al ordenar aleatoriamente los n√∫meros en X e Y.
</figcaption>
</figure>
</div>
</div>
</div>
<p>La <a href="#fig-3simsum" class="quarto-xref">Figura&nbsp;<span>3.3</span></a> muestra 1000 simulaciones por computadora. Convenc√≠ a mi computadora de que ordenara al azar los n√∫meros del 1 al 10 para X, y tambi√©n del 1 al 10 para Y. Luego, multiplic√≥ X por Y, y sum√≥ los productos. Hizo esto 1000 veces. Cada punto en el gr√°fico muestra la suma de los productos para una de esas simulaciones. Las dos l√≠neas negras marcan la suma m√°xima posible (385) y la m√≠nima posible (220) para este conjunto de n√∫meros. Not√° c√≥mo todos los puntos est√°n entre esos dos valores. Te lo dije.</p>
<p>‚ÄúOK, est√° bien, me lo advertiste‚Ä¶ ¬øy qu√©? ¬øa qui√©n le importa?‚Äù.<br>
Est√°bamos buscando una forma de resumir la covarianza entre dos variables, ¬øno? Bueno, para estos n√∫meros, encontramos una: <strong>la suma de los productos</strong>. Sabemos que cuando esa suma da 385, hay una correlaci√≥n perfecta y positiva. Sabemos que si da 220, hay una correlaci√≥n perfecta y negativa. ¬øY qu√© pasa con los n√∫meros que est√°n en el medio? ¬øQu√© podemos concluir sobre la correlaci√≥n si la suma de productos da, por ejemplo, 350?<br>
Bueno, va a ser positiva, porque est√° cerca de 385, que es correlaci√≥n perfectamente positiva.<br>
Si la suma de productos fuera 240, va a ser negativa, porque est√° cerca de 220, que es la correlaci√≥n perfectamente negativa.<br>
¬øY si no hay correlaci√≥n? Entonces la suma va a estar justo en el medio entre 220 y 385, ¬øno?</p>
<p>Lo que acabamos de hacer es inventar una medida de resumen espec√≠fica para estos datos: una forma de cuantificar la correlaci√≥n entre los n√∫meros del 1 al 10 en X, y del 1 al 10 en Y, usando la <strong>suma de productos</strong>. Y como sabemos cu√°l es el m√°ximo (385) y el m√≠nimo (220), ahora podemos interpretar cualquier suma de productos de este tipo de datos respecto a esa escala.</p>
<blockquote class="blockquote">
<p>üß† Consejo pro: Cuando la correlaci√≥n entre dos variables aumenta en direcci√≥n positiva, la suma de sus productos se acerca al valor m√°ximo posible. Esto ocurre porque los n√∫meros grandes en X tienden a alinearse con los n√∫meros grandes en Y, creando la mayor suma de productos. Cuando la correlaci√≥n es negativa, la suma de los productos se acerca al valor m√≠nimo posible, porque los n√∫meros grandes en X se alinean con los n√∫meros peque√±os en Y. Si no hay correlaci√≥n, los n√∫meros grandes de X se alinean aleatoriamente con los grandes y peque√±os de Y, haciendo que la suma quede en un valor intermedio.</p>
</blockquote>
<section id="la-covarianza-como-medida" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="la-covarianza-como-medida"><span class="header-section-number">3.3.1</span> La covarianza como medida</h3>
<p>Nos tomamos un tiempo para ver qu√© pasa cuando multiplicamos dos conjuntos de n√∫meros. Descubrimos que:</p>
<p><span class="math display">\[
\text{grande} \times \text{grande} = \text{m√°s grande}
\]</span></p>
<p><span class="math display">\[
\text{chico} \times \text{chico} = \text{sigue siendo chico}
\]</span></p>
<p><span class="math display">\[
\text{grande} \times \text{chico} = \text{algo intermedio}
\]</span></p>
<p>La idea era darte una intuici√≥n conceptual sobre c√≥mo se refleja la <strong>covarianza</strong> entre dos variables en la suma de sus productos. Hicimos algo bien simple: multiplicamos X por Y, y observamos c√≥mo var√≠a la suma de los productos cuando X e Y covar√≠an de diferentes maneras. Ahora podemos ponernos un poco m√°s formales. En estad√≠stica, la <strong>covarianza</strong> no es simplemente multiplicar los valores de X y Y. En realidad, se trata de multiplicar las <strong>desviaciones</strong> de X respecto de su media, por las <strong>desviaciones</strong> de Y respecto de su media. ¬øTe acord√°s de esas diferencias con respecto a la media que vimos en el cap√≠tulo anterior? Bueno, ahora vuelven‚Ä¶ pero tranquilos, vuelven en son de paz, como Gaspar√≠n, el fantasma amigable.</p>
<p>Veamos c√≥mo se ve esto en una tabla:</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning in rbind(deparse.level, ...): El n√∫mero de columnas del resultado, 6,
no es un m√∫ltiplo de la longitud del vector 7 del argumento 2</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">sujeto</th>
<th style="text-align: left;">chocolate</th>
<th style="text-align: left;">felicidad</th>
<th style="text-align: left;">C_d</th>
<th style="text-align: left;">F_d</th>
<th style="text-align: left;">Cd_x_Fd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">-2.8</td>
<td style="text-align: left;">-2.4</td>
<td style="text-align: left;">6.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">-1.8</td>
<td style="text-align: left;">-2.4</td>
<td style="text-align: left;">4.32</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">-0.8</td>
<td style="text-align: left;">-1.4</td>
<td style="text-align: left;">1.12</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">-1.8</td>
<td style="text-align: left;">-1.4</td>
<td style="text-align: left;">2.52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">-0.8</td>
<td style="text-align: left;">-0.4</td>
<td style="text-align: left;">0.32</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">1.6</td>
<td style="text-align: left;">1.92</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">0.2</td>
<td style="text-align: left;">1.6</td>
<td style="text-align: left;">0.32</td>
</tr>
<tr class="even">
<td style="text-align: left;">8</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">1.2</td>
<td style="text-align: left;">0.6</td>
<td style="text-align: left;">0.72</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">2.2</td>
<td style="text-align: left;">2.6</td>
<td style="text-align: left;">5.72</td>
</tr>
<tr class="even">
<td style="text-align: left;">10</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">3.2</td>
<td style="text-align: left;">1.6</td>
<td style="text-align: left;">5.12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sumas</td>
<td style="text-align: left;">38</td>
<td style="text-align: left;">34</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">29</td>
</tr>
<tr class="even">
<td style="text-align: left;">Medias</td>
<td style="text-align: left;">3.8</td>
<td style="text-align: left;">3.4</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">2.88</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Calculamos las desviaciones respecto de la media para las puntuaciones de chocolate (columna <code>C_d</code>), y tambi√©n para las de felicidad (columna <code>F_d</code>). Despu√©s las multiplicamos (√∫ltima columna). Finalmente, pod√©s ver el promedio de los productos listado en la esquina inferior derecha de la tabla, que muestra la <strong>covarianza</strong> oficial.</p>
<p>La f√≥rmula de la covarianza es:</p>
<p><span class="math inline">\(cov(X,Y) = \frac{\sum_{i}^{n}(x_{i}-\bar{X})(y_{i}-\bar{Y})}{N}\)</span></p>
<p>OK, ahora tenemos un n√∫mero formal que resume la relaci√≥n entre dos variables. Esto est√° buen√≠simo, era lo que ven√≠amos buscando.<br>
Sin embargo, hay un problema. ¬øTe acord√°s cuando aprendimos a calcular la <strong>varianza</strong>? Obten√≠amos un n√∫mero y no sab√≠amos bien qu√© hacer con √©l. Estaba al cuadrado, no estaba en la misma escala que los datos originales. Entonces sac√°bamos la ra√≠z cuadrada de la varianza para obtener la <strong>desviaci√≥n est√°ndar</strong>, que era un n√∫mero m√°s interpretable, en la misma escala que los datos.<br>
Bueno, con la <strong>covarianza</strong> pasa algo parecido. Cuando la calcul√°s como acabamos de hacer, no sab√©s inmediatamente en qu√© escala est√°. ¬øUn valor de 3 es grande? ¬øY 6? ¬ø100? ¬øQu√© tan grande o chico es?</p>
<p>En la discusi√≥n previa sobre covarianza, aprendimos que la suma de productos entre dos variables puede ir de un valor m√≠nimo a un valor m√°ximo. Lo mismo vale para la covarianza. Para un conjunto de datos determinado, hay un valor m√°ximo posible de covarianza positiva (cuando la correlaci√≥n es perfectamente positiva), y un m√≠nimo posible para la negativa (cuando es perfectamente negativa). Y cuando no hay covariaci√≥n, adivin√° qu√© pasa: da cero.</p>
<p>As√≠ que al menos, cuando miramos una covarianza, podemos ver si apunta en direcci√≥n positiva o negativa. Pero <strong>no sabemos cu√°n grande o chica es</strong> en relaci√≥n con los valores m√°ximos o m√≠nimos posibles. Eso significa que <strong>no podemos decir qu√© tan fuerte es la correlaci√≥n</strong>.<br>
Entonces‚Ä¶ ¬øqu√© hacemos?</p>
</section>
<section id="ya-llegamos-al-r-de-pearson" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="ya-llegamos-al-r-de-pearson"><span class="header-section-number">3.3.2</span> ¬øYa llegamos al <em>r</em> de Pearson?</h3>
<p>S√≠, ya llegamos. ¬øNo estar√≠a bueno si pudi√©ramos forzar nuestra medida de covarianza a estar siempre entre ‚Äì1 y +1?</p>
<p>‚Äì1 ser√≠a el valor m√≠nimo para una correlaci√≥n negativa perfecta.<br>
+1 ser√≠a el m√°ximo posible para una correlaci√≥n positiva perfecta. 0 indicar√≠a que no hay correlaci√≥n.</p>
<p>Todo lo que est√© entre 0 y ‚Äì1 ser√≠an correlaciones negativas cada vez m√°s fuertes. Todo lo que est√© entre 0 y +1 ser√≠an correlaciones positivas cada vez m√°s fuertes.<br>
Ser√≠a un sistema fant√°stico, coherente, f√°cil de interpretar. Si tan solo pudi√©ramos forzar el n√∫mero de covarianza a estar entre ‚Äì1 y 1‚Ä¶</p>
<p>Por suerte, este episodio est√° auspiciado por el <strong>r de Pearson</strong>, que hace justamente eso tan maravilloso.</p>
<p>Veamos la f√≥rmula del <em>r</em> de Pearson:</p>
<p>$r = = $</p>
<p>Aparece el s√≠mbolo <span class="math inline">\(\sigma\)</span> (s√≠, m√°s griego para vos). <span class="math inline">\(\sigma\)</span> es el s√≠mbolo que se usa frecuentemente para la desviaci√≥n est√°ndar.<br>
Le√≠do en voz alta: <em>r</em> es la covarianza de X e Y dividida por el producto de las desviaciones est√°ndar de X y Y.<br>
¬øY por qu√© hacemos esa divisi√≥n? Porque esta operaci√≥n tiene el efecto de <strong>normalizar</strong> la covarianza, forz√°ndola a caer dentro del rango ‚Äì1 a 1.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>M√°s adelante vamos a explicar esta magia matem√°tica‚Ä¶ prometido. Pero te adelantamos que no es magia. La explicaci√≥n r√°pida es que dividir cada variable por su desviaci√≥n est√°ndar garantiza que todas las mediciones est√©n en el mismo rango de escala.</p>
</div>
</div>
<p>Por ahora, pod√©s pensar que es magia matem√°tica. Funciona. Ya despu√©s veremos por qu√©.</p>
<p>::: Vale decir que existen muchas f√≥rmulas diferentes para calcular el <em>r</em> de Pearson. Pod√©s buscarlas en Google y vas a ver varias versiones. Algunas aparecer√°n m√°s adelante en este libro tambi√©n.<br>
Pero todas dan el mismo resultado. Algunas son m√°s elegantes que otras. Y algunas pueden parecer un poco intimidantes. En otros libros de estad√≠stica vas a encontrar f√≥rmulas pensadas para facilitar los c√°lculos a mano, por ejemplo si solo ten√©s papel y l√°piz.<br>
Pero la verdad, no nos interesa mucho ense√±arte a enchufar n√∫meros en f√≥rmulas. Nuestra √∫nica lecci√≥n sobre eso es esta: pon√© los n√∫meros en las letras, y calcul√°. Perd√≥n si sonamos secos.<br>
Hoy en d√≠a ten√©s una computadora, y deber√≠as usarla para estas cosas. As√≠ que nuestro inter√©s est√° m√°s en ense√±arte <strong>qu√© significan</strong> los c√°lculos, m√°s que en c√≥mo hacerlos.<br>
Claro que igual, cada semana en el laboratorio te mostramos c√≥mo hacer los c√°lculos en la compu, porque eso tambi√©n es importante. :::</p>
<p>¬øEl <em>r</em> de Pearson <strong>siempre</strong> queda entre ‚Äì1 y 1, sin importar qu√© datos uses? S√≠. Mir√° la siguiente simulaci√≥n. Reordenamos al azar los n√∫meros del 1 al 10 para una variable X, y lo mismo para Y. Calculamos el <em>r</em> de Pearson y repetimos eso 1000 veces. Como pod√©s ver en la figura <span class="quarto-unresolved-ref">?fig-3onethousandr</span>, <strong>todos</strong> los puntos caen entre ‚Äì1 y 1. Buen√≠simo, ¬øno?</p>
</section>
</section>
<section id="ejemplos-con-datos" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="ejemplos-con-datos"><span class="header-section-number">3.4</span> Ejemplos con datos</h2>
<p>En el laboratorio sobre correlaci√≥n, vas a aprender a calcular correlaciones con datos reales usando software. Para darte una vista previa, miremos algunos datos del <a href="http://worldhappiness.report">Informe Mundial de la Felicidad</a> (2018).</p>
<p>Este informe mide diversas actitudes en personas de distintos pa√≠ses. Por ejemplo, una de las preguntas era sobre cu√°nta libertad sent√≠an que ten√≠an para tomar decisiones en la vida. Otra preguntaba cu√°nta confianza ten√≠an en su gobierno nacional. La figura <a href="#fig-3hsrdata" class="quarto-xref">Figura&nbsp;<span>3.4</span></a> muestra un gr√°fico de dispersi√≥n con la relaci√≥n entre estas dos variables. Cada punto representa promedios para un pa√≠s diferente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>whr_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">'data/WHR2018.csv'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># seleccionar variables y filtrar valores faltantes</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>smaller_df <span class="ot">&lt;-</span> whr_data <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">select</span>(country,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Freedom to make life choices</span><span class="st">`</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                      <span class="st">`</span><span class="at">Confidence in national government</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>               dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Freedom to make life choices</span><span class="st">`</span>),</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Confidence in national government</span><span class="st">`</span>))</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># graficar los datos con l√≠nea de mejor ajuste</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller_df, <span class="fu">aes</span>(<span class="at">x=</span><span class="st">`</span><span class="at">Freedom to make life choices</span><span class="st">`</span>,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y=</span><span class="st">`</span><span class="at">Confidence in national government</span><span class="st">`</span>))<span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span>.<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm, <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Libertad para tomar decisiones en la vida"</span>,<span class="at">y=</span><span class="st">"Confianza en el gobierno nacional"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-3hsrdata" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3hsrdata-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3hsrdata-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3hsrdata-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.4: Relaci√≥n entre la libertad para tomar decisiones en la vida y la confianza en el gobierno nacional. Datos del Informe Mundial de la Felicidad de 2018
</figcaption>
</figure>
</div>
</div>
</div>
<p>Agregamos una l√≠nea azul al gr√°fico para resumir la relaci√≥n positiva. Parece que, a medida que aumenta la ‚Äúlibertad para tomar decisiones en la vida‚Äù, tambi√©n aumenta la confianza en el gobierno nacional. Es una correlaci√≥n positiva.</p>
<p>La correlaci√≥n real, medida por el <em>r</em> de Pearson, es:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate correlation</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Freedom to make life choices</span><span class="st">`</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    smaller_df<span class="sc">$</span><span class="st">`</span><span class="at">Confidence in national government</span><span class="st">`</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4080963</code></pre>
</div>
</div>
<p>En el laboratorio vas a hacer mucho m√°s de este tipo de an√°lisis. Al mirar el gr√°fico, podr√≠as empezar a preguntarte: ¬øacaso la libertad para tomar decisiones causa un cambio en la confianza en el gobierno nacional? ¬øO ser√° al rev√©s? ¬øTener confianza en el gobierno hace que uno se sienta m√°s libre para tomar decisiones? ¬øO tal vez esta relaci√≥n es solo una coincidencia sin sentido?<br>
Todas son buenas preguntas. Pero estos datos <strong>no</strong> nos dan la respuesta. Solo sugieren que <em>podr√≠a</em> haber una relaci√≥n.</p>
</section>
<section id="regresi√≥n-una-mini-introducci√≥n" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="regresi√≥n-una-mini-introducci√≥n"><span class="header-section-number">3.5</span> Regresi√≥n: una mini introducci√≥n</h2>
<p>Ahora vamos a agregar una cosita m√°s a lo que venimos aprendiendo sobre correlaci√≥n. Se llama <strong>regresi√≥n lineal</strong>. Suena intimidante, y‚Ä¶ en parte lo es. Mucho m√°s adelante, vas a descubrir que todo lo que estamos por aprender es en realidad un caso especial de la regresi√≥n.<br>
Pero no queremos que salgas corriendo todav√≠a, as√≠ que ahora solo te presentamos los conceptos b√°sicos.</p>
<p>Primero, miremos una regresi√≥n lineal. As√≠ vas a ver de qu√© estamos hablando. La figura <a href="#fig-3regression" class="quarto-xref">Figura&nbsp;<span>3.5</span></a> muestra los mismos diagramas de dispersi√≥n que antes, pero con algo nuevo: ¬°l√≠neas!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>felicidad_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>df_positive<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,felicidad_x)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>felicidad_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">1</span><span class="sc">*</span><span class="fu">runif</span>(<span class="dv">100</span>,.<span class="dv">5</span>,<span class="dv">1</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>df_negative<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,felicidad_x)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>sujeto_x<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">100</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>chocolate_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">100</span>))</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>felicidad_x<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>,<span class="dv">0</span>,<span class="dv">100</span>))</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>df_random<span class="ot">&lt;-</span><span class="fu">data.frame</span>(sujeto_x,chocolate_x,felicidad_x)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>all_data<span class="ot">&lt;-</span><span class="fu">rbind</span>(df_positive,df_negative,df_random)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>all_data<span class="ot">&lt;-</span><span class="fu">cbind</span>(all_data,<span class="at">correlation=</span><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"positiva"</span>,<span class="st">"negativa"</span>,<span class="st">"aleatoria"</span>),<span class="at">each=</span><span class="dv">100</span>))</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_data,<span class="fu">aes</span>(<span class="at">x=</span>chocolate_x,<span class="at">y=</span>felicidad_x))<span class="sc">+</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>,<span class="at">se=</span>F)<span class="sc">+</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>correlation)<span class="sc">+</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"suministro de chocolate"</span>)<span class="sc">+</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"felicidad"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-3regression" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3regression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3regression-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3regression-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.5: Tres diagramas de dispersi√≥n que muestran una correlaci√≥n negativa, una positiva y una aleatoria (donde se espera que el valor de r sea 0), junto con la l√≠nea de regresi√≥n de mejor ajuste
</figcaption>
</figure>
</div>
</div>
</div>
<section id="la-l√≠nea-de-mejor-ajuste" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="la-l√≠nea-de-mejor-ajuste"><span class="header-section-number">3.5.1</span> La l√≠nea de mejor ajuste</h3>
<p>¬øNot√°s algo particular en estas l√≠neas azules? Esperamos que, al menos en los dos primeros paneles, puedas ver que pasan directamente por el medio de los datos, como si fueran un palito de brochette. A estas l√≠neas las llamamos <strong>l√≠neas de mejor ajuste</strong>, porque seg√∫n la definici√≥n que vamos a ver (te prometemos que ya llega), <strong>no hay ninguna otra l√≠nea que puedas dibujar que haga un mejor trabajo atravesando los datos</strong>.</p>
<p>Una idea importante ac√° es que estamos usando la l√≠nea como una especie de ‚Äúmedia‚Äù para describir la relaci√≥n entre las dos variables.<br>
Cuando solo tenemos una variable, esa variable existe en una dimensi√≥n: es un dato 1D. En ese caso, tiene sentido usar un √∫nico n√∫mero ‚Äîcomo la media‚Äî para describir su tendencia central.<br>
Pero cuando tenemos dos variables, y las graficamos juntas, estamos en un espacio bidimensional. Entonces, para ese espacio 2D, podemos usar algo m√°s grande ‚Äîcomo una l√≠nea‚Äî para resumir la tendencia central en la relaci√≥n entre ambas variables.</p>
<p>¬øQu√© esperamos de esa l√≠nea? Bueno, si tuvieras un l√°piz y un gr√°fico impreso, podr√≠as dibujar un mont√≥n de l√≠neas rectas como se te ocurriera. Tus l√≠neas ni siquiera tendr√≠an que pasar por los datos: podr√≠an tener cualquier inclinaci√≥n o direcci√≥n.<br>
¬øSer√≠an todas esas l√≠neas buenas para describir el patr√≥n general de los puntos? La mayor√≠a, no.<br>
Las mejores l√≠neas ser√≠an aquellas que siguen el patr√≥n general de los puntos. Pero de entre todas las l√≠neas buenas, ¬øcu√°l es la mejor? ¬øC√≥mo podemos saberlo? ¬øY qu√© significa ‚Äúmejor‚Äù?<br>
En resumen: <strong>la l√≠nea de mejor ajuste es aquella que tiene el menor error</strong>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>C√≥digo R para graficar los residuos, cortes√≠a del blog de Simon Jackson: <a href="https://drsimonj.svbtle.com/visualising-residuals" class="uri">https://drsimonj.svbtle.com/visualising-residuals</a></p>
</div>
</div>
<p>Mir√° este pr√≥ximo gr√°fico. Muestra una l√≠nea que atraviesa algunos puntos. Pero tambi√©n muestra unas l√≠neas peque√±as que bajan desde cada punto hasta la l√≠nea. Cada una de esas l√≠neas chiquitas se llama <strong>residuo</strong>.<br>
Los residuos te muestran cu√°n lejos est√° cada punto de la l√≠nea. Es una medida de error, y nos dice <strong>qu√© tan equivocada est√°</strong> la l√≠nea.<br>
Despu√©s de todo, no todos los puntos est√°n sobre la l√≠nea. Eso significa que <strong>la l√≠nea no representa perfectamente a los datos</strong>.<br>
Pero la l√≠nea de mejor ajuste es <strong>la menos equivocada</strong> de todas las posibles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> mtcars</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> hp, <span class="at">data =</span> d)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit)   <span class="co"># Guardar los valores predichos</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>residuals <span class="ot">&lt;-</span> <span class="fu">residuals</span>(fit) <span class="co"># Guardar los residuos</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(d, <span class="fu">aes</span>(<span class="at">x =</span> hp, <span class="at">y =</span> mpg)) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span>  <span class="co"># L√≠nea de regresi√≥n</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> hp, <span class="at">yend =</span> predicted, <span class="at">color=</span><span class="st">"red"</span>), <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span>  <span class="co"># L√≠neas rojas de error</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> predicted), <span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span>  <span class="co"># Puntos blancos</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"X"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Y"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-3regressionResiduals" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3regressionResiduals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3regressionResiduals-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3regressionResiduals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.6: Los puntos negros representan los datos reales. La l√≠nea azul es la de mejor ajuste. Los puntos blancos indican los valores predichos por la l√≠nea azul. Las l√≠neas rojas muestran el error entre cada punto real y su predicci√≥n. La l√≠nea azul es la mejor porque minimiza ese error.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Pasan muchas cosas en la figura <a href="#fig-3regressionResiduals" class="quarto-xref">Figura&nbsp;<span>3.6</span></a>. Primero, estamos mirando un diagrama de dispersi√≥n de dos variables, una variable X y una variable Y. Cada punto negro representa los valores reales de esas variables. Pod√©s ver que hay una correlaci√≥n negativa: a medida que X aumenta, Y tiende a disminuir.<br>
Trazamos una l√≠nea de regresi√≥n sobre los datos ‚Äîesa es la l√≠nea azul. Tambi√©n aparecen unos puntitos blancos.<br>
Esos muestran <strong>d√≥nde la l√≠nea ‚Äúcree‚Äù que deber√≠an estar los puntos negros</strong>.<br>
Y est√°n tambi√©n las l√≠neas rojas, que son los residuos de los que ven√≠amos hablando.<br>
Cada punto negro tiene una l√≠nea roja que baja (o sube) en l√≠nea recta desde su ubicaci√≥n hasta tocar la l√≠nea.<br>
Ya podemos ver que muchos de los puntos <strong>no est√°n sobre la l√≠nea</strong>, as√≠ que sabemos que la l√≠nea se equivoca un poco en cada punto.<br>
La l√≠nea roja simplemente hace que sea m√°s f√°cil ver <strong>exactamente cu√°nto se equivoca</strong>.</p>
<p>Lo importante que est√° ocurriendo ac√° es que la l√≠nea azul fue trazada de manera tal que <strong>minimiza la suma total de las l√≠neas rojas</strong>.<br>
Por ejemplo, si quisi√©ramos saber <strong>cu√°n equivocada</strong> est√° esta l√≠nea, podr√≠amos juntar todas las l√≠neas rojas, medir cu√°nto miden, y sumar todas esas equivocaciones.<br>
Eso nos dar√≠a el <strong>error total</strong>.<br>
De hecho, ya hablamos de esta idea cuando discutimos la desviaci√≥n est√°ndar.<br>
Lo que realmente vamos a hacer con estas l√≠neas rojas es <strong>elevar al cuadrado su longitud</strong> (para que los valores negativos no se cancelen), y luego <strong>sumarlas</strong>.<br>
Esa suma representa el <strong>total de error</strong>.<br>
Y esta l√≠nea azul <strong>minimiza esa suma</strong>.<br>
Cualquier otra l√≠nea tendr√≠a un error total mayor.</p>
<p>La figura <a href="#fig-3regressionGIF" class="quarto-xref">Figura&nbsp;<span>3.7</span></a> es una animaci√≥n que muestra esto en acci√≥n.<br>
La animaci√≥n compara la l√≠nea azul (la de mejor ajuste) con otras l√≠neas posibles (en negro).<br>
La l√≠nea negra se mueve hacia arriba y abajo. Las l√≠neas rojas muestran el error entre la l√≠nea negra y los puntos de datos.<br>
A medida que la l√≠nea negra se acerca a la l√≠nea azul, el error total ‚Äîrepresentado visualmente como un √°rea gris‚Äî <strong>se achica hasta su valor m√≠nimo</strong>.<br>
Ese error total se agranda a medida que la l√≠nea negra se aleja de la l√≠nea azul.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="at">path=</span><span class="st">"imgs/gifs/regression-1.gif"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3regressionGIF" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3regressionGIF-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="imgs/gifs/regression-1.gif" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3regressionGIF-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.7: La l√≠nea azul es la l√≠nea de regresi√≥n que mejor explica la covariaci√≥n entre los puntos negros. La l√≠nea negra se mueve hacia arriba y abajo, mostrando l√≠neas alternativas que podr√≠an trazarse. Las l√≠neas rojas indican el error entre cada punto de datos y la l√≠nea negra. La cantidad total de error est√° representada por el √°rea gris sombreada. Esta √°rea se agranda a medida que la l√≠nea negra se aleja de la l√≠nea azul, y se achica al m√≠nimo cuando la l√≠nea negra se acerca a la l√≠nea de mejor ajuste.‚Äù
</figcaption>
</figure>
</div>
</div>
</div>
<p>Siempre que la l√≠nea negra no coincida con la l√≠nea azul, es peor que la l√≠nea de mejor ajuste.<br>
La l√≠nea de regresi√≥n azul es como Ricitos de Oro: est√° justo en el medio, y es la adecuada.</p>
<p>La figura <a href="#fig-3minimizeSS" class="quarto-xref">Figura&nbsp;<span>3.8</span></a> muestra c√≥mo se comporta la <strong>suma de los errores al cuadrado</strong> (es decir, la suma de las longitudes al cuadrado de las l√≠neas rojas) cuando movemos la l√≠nea hacia arriba o abajo. Lo que hacemos ac√° es calcular una medida del <strong>error total</strong> para cada posible posici√≥n vertical de la l√≠nea.<br>
Ese gr√°fico muestra c√≥mo el error <strong>disminuye hasta un m√≠nimo</strong> cuando la l√≠nea est√° en la posici√≥n √≥ptima, y <strong>aumenta otra vez</strong> cuando nos movemos m√°s all√° de ese punto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> mtcars</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> hp, <span class="at">data =</span> d)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>predicted <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit)   <span class="co"># Guardar los valores predichos</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>d<span class="sc">$</span>residuals <span class="ot">&lt;-</span> <span class="fu">residuals</span>(fit) <span class="co"># Guardar los residuos</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>coefs <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> d<span class="sc">$</span>hp</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>move_line <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>, <span class="fl">0.5</span>)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>total_error <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">length</span>(move_line))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>cnt <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> move_line) {</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  cnt <span class="ot">&lt;-</span> cnt <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  predicted_y <span class="ot">&lt;-</span> coefs[<span class="dv">2</span>] <span class="sc">*</span> x <span class="sc">+</span> coefs[<span class="dv">1</span>] <span class="sc">+</span> i</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  error_y <span class="ot">&lt;-</span> (predicted_y <span class="sc">-</span> d<span class="sc">$</span>mpg)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  total_error[cnt] <span class="ot">&lt;-</span> <span class="fu">sum</span>(error_y)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(move_line, total_error)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> move_line, <span class="at">y =</span> total_error)) <span class="sc">+</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Suma de los errores cuadrados"</span>) <span class="sc">+</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Cambio en la intersecci√≥n con el eje y"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3minimizeSS" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3minimizeSS-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3minimizeSS-1.png" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3minimizeSS-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.8: Suma de los errores cuadrados para diferentes l√≠neas con distintas intersecciones. La suma m√≠nima ocurre con la l√≠nea de mejor ajuste.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Todav√≠a no hablamos de la intersecci√≥n con el eje y. Pero este gr√°fico nos muestra c√≥mo se comporta el <strong>error total</strong> al mover la l√≠nea hacia arriba o hacia abajo.<br>
La intersecci√≥n con el eje y es lo que estamos cambiando cuando movemos la l√≠nea verticalmente.<br>
Como pod√©s ver, el error aumenta cuando bajamos la l√≠nea desde 0 hasta ‚Äì5, y tambi√©n aumenta cuando la subimos desde 0 hasta +5.<br>
La mejor l√≠nea ‚Äîla que <strong>minimiza el error</strong>‚Äî ocurre justo en el medio, cuando <strong>no movemos en absoluto</strong> la l√≠nea azul de regresi√≥n.</p>
</section>
<section id="l√≠neas" class="level3" data-number="3.5.2">
<h3 data-number="3.5.2" class="anchored" data-anchor-id="l√≠neas"><span class="header-section-number">3.5.2</span> L√≠neas</h3>
<p>Bueno, dec√≠s. As√≠ que hay una l√≠nea m√°gica que atraviesa el centro del diagrama de dispersi√≥n y minimiza la suma de los errores al cuadrado. ¬øC√≥mo encuentro esa l√≠nea m√°gica?<br>
Te lo vamos a mostrar. Pero, para ser completamente honestos, casi nunca vas a hacerlo de la manera que vamos a explicar ac√°.<br>
En cambio, es mucho m√°s f√°cil usar software y hacer que la computadora lo calcule por vos.<br>
Vas a aprender a hacerlo as√≠ en los laboratorios.</p>
<p>Antes de mostrarte c√≥mo encontrar la l√≠nea de regresi√≥n, vale la pena refrescar la memoria sobre c√≥mo funcionan las l√≠neas, especialmente en 2 dimensiones. ¬øTe acord√°s de esto?</p>
<p><span class="math inline">\(y = ax + b\)</span>, o tambi√©n <span class="math inline">\(y = mx + b\)</span> (A veces se usa <span class="math inline">\(a\)</span> o <span class="math inline">\(m\)</span> para representar la pendiente)</p>
<p>Esta es la f√≥rmula de una l√≠nea recta. Otra forma de escribirla ser√≠a:</p>
<p><span class="math inline">\(y = \text{pendiente} * x + \text{intercepto}\)</span></p>
<p>La <strong>pendiente</strong> indica la inclinaci√≥n de la l√≠nea, y el <strong>intercepto</strong> o la <strong>intersecci√≥n con el eje y</strong> es el punto donde la l√≠nea cruza el eje vertical.<br>
Miremos las l√≠neas de la figura <a href="#fig-3twolines" class="quarto-xref">Figura&nbsp;<span>3.9</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()<span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope=</span><span class="dv">1</span>,<span class="at">intercept=</span><span class="dv">5</span>,<span class="at">color=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope=</span><span class="sc">-</span><span class="dv">1</span>, <span class="at">intercept=</span><span class="dv">15</span>, <span class="at">color=</span><span class="st">"red"</span>)<span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lims</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">20</span>))<span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3twolines" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3twolines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3twolines-1.png" class="img-fluid figure-img" style="width:50.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3twolines-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.9: Dos l√≠neas diferentes con distintas intersecciones en el eje y (donde la l√≠nea cruza el eje vertical) y distintas pendientes. Una pendiente positiva hace que la l√≠nea suba de izquierda a derecha. Una pendiente negativa hace que la l√≠nea baje de izquierda a derecha.
</figcaption>
</figure>
</div>
</div>
</div>
<p>La f√≥rmula para la l√≠nea azul es: <span class="math inline">\(y = 1*x + 5\)</span>. Hablemos de eso. Cuando <span class="math inline">\(x=0\)</span> , ¬ød√≥nde est√° la l√≠nea azul en el eje y? Est√° en 5.<br>
Eso pasa porque $ 1 = 0 $, y entonces nos queda solo el 5. ¬øY qu√© pasa cuando <span class="math inline">\(x = 5\)</span>? En ese caso:</p>
<p><span class="math inline">\(y = 1 \cdot 5 + 5 = 5 + 5 = 10\)</span></p>
<p>La idea de la f√≥rmula es decirte d√≥nde est√° <span class="math inline">\(y\)</span>, para cualquier valor de <span class="math inline">\(x\)</span>.<br>
La pendiente de la l√≠nea te indica si la l√≠nea sube o baja cuando te mov√©s de izquierda a derecha.<br>
La l√≠nea azul tiene una pendiente positiva de uno, as√≠ que sube a medida que <span class="math inline">\(x\)</span> aumenta. ¬øCu√°nto sube? Sube uno por cada unidad de <span class="math inline">\(x\)</span>.<br>
Si hici√©ramos que la pendiente fuera 2, la l√≠nea ser√≠a mucho m√°s empinada y subir√≠a m√°s r√°pido.<br>
La l√≠nea roja tiene pendiente negativa, as√≠ que se inclina hacia abajo.<br>
Eso significa que <span class="math inline">\(y\)</span> disminuye a medida que <span class="math inline">\(x\)</span> aumenta.<br>
Y si no hay pendiente ‚Äîes decir, queremos una l√≠nea completamente horizontal‚Äî, simplemente ponemos la pendiente en 0.<br>
Eso significa que <span class="math inline">\(y\)</span> <strong>no cambia nada</strong>, aunque <span class="math inline">\(x\)</span> aumente o disminuya.</p>
<p>Eso son las l√≠neas.</p>
</section>
<section id="calcular-la-l√≠nea-de-mejor-ajuste" class="level3" data-number="3.5.3">
<h3 data-number="3.5.3" class="anchored" data-anchor-id="calcular-la-l√≠nea-de-mejor-ajuste"><span class="header-section-number">3.5.3</span> Calcular la l√≠nea de mejor ajuste</h3>
<p>Si ten√©s un diagrama de dispersi√≥n que muestra la ubicaci√≥n de puntajes de dos variables, la verdadera pregunta es: ¬øc√≥mo encontr√°s la pendiente y la intersecci√≥n con el eje y de la mejor l√≠nea de ajuste?<br>
¬øQu√© vas a hacer? ¬øDibujar millones de l√≠neas, sumar los residuos y ver cu√°l es la mejor?<br>
Eso llevar√≠a una eternidad. Por suerte, existen las computadoras.<br>
Y si no ten√©s una a mano, tambi√©n hay algunas f√≥rmulas √∫tiles.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vale la pena mencionar cu√°nto cambiaron las cosas desde que existen las computadoras.<br>
Antes, todo el mundo ten√≠a que hacer estos c√°lculos a mano ‚Äî¬°un embole total!<br>
M√°s all√° de las ideas matem√°ticas profundas detr√°s de las f√≥rmulas, muchas fueron dise√±adas por conveniencia, para facilitar los c√°lculos a mano, porque no hab√≠a computadoras.<br>
Ahora que las tenemos, hacer las cuentas a mano suele ser solo un ejercicio de √°lgebra‚Ä¶<br>
Tal vez sirve para forjar el car√°cter. Vos decid√≠s.</p>
</div>
</div>
<p>Te vamos a mostrar las f√≥rmulas.<br>
Y vamos a resolver un ejemplo a mano. S√≠, lo sabemos: es un horror.<br>
Por cierto, deber√≠as sentir un poco de l√°stima por m√≠ mientras hago todo esto a mano por vos.</p>
<p>Ac√° est√°n las dos f√≥rmulas que pod√©s usar para calcular la pendiente y la intersecci√≥n directamente desde los datos.<br>
No vamos a explicar por qu√© hacen lo que hacen. Estas son solo f√≥rmulas ‚Äúpr√°cticas‚Äù para facilitar los c√°lculos:</p>
<p><span class="math inline">\(\text{intercepto} = b = \frac{\sum{y}\sum{x^2}-\sum{x}\sum{xy}}{n\sum{x^2}-(\sum{x})^2}\)</span></p>
<p><span class="math inline">\(\text{pendiente}= m = \frac{n\sum{xy}-\sum{x}\sum{y}}{n\sum{x^2}-(\sum{x})^2}\)</span></p>
<p>En estas f√≥rmulas, <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span> se refieren a los puntajes individuales. Ac√° ten√©s una tabla que muestra c√≥mo encajan todas las partes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>scores<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>x<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>y<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>x_squared<span class="ot">&lt;-</span>x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>y_squared<span class="ot">&lt;-</span>y<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>xy<span class="ot">&lt;-</span>x<span class="sc">*</span>y</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>all_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(scores,x,y,x_squared,y_squared,xy)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>all_df <span class="ot">&lt;-</span> all_df <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="st">"Sumas"</span>,<span class="fu">colSums</span>(all_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>,<span class="dv">2</span><span class="sc">:</span><span class="dv">6</span>]))) </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>slope<span class="ot">=</span>((<span class="fu">sum</span>(y)<span class="sc">*</span><span class="fu">sum</span>(x_squared))<span class="sc">-</span>(<span class="fu">sum</span>(x)<span class="sc">*</span><span class="fu">sum</span>(xy)))<span class="sc">/</span>((<span class="dv">7</span><span class="sc">*</span><span class="fu">sum</span>(x_squared))<span class="sc">-</span><span class="fu">sum</span>(x)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>intercept<span class="ot">=</span>(<span class="dv">7</span><span class="sc">*</span><span class="fu">sum</span>(xy)<span class="sc">-</span><span class="fu">sum</span>(x)<span class="sc">*</span><span class="fu">sum</span>(y))<span class="sc">/</span>(<span class="dv">7</span><span class="sc">*</span><span class="fu">sum</span>(x_squared)<span class="sc">-</span><span class="fu">sum</span>(x)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(all_df)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">scores</th>
<th style="text-align: left;">x</th>
<th style="text-align: left;">y</th>
<th style="text-align: left;">x_squared</th>
<th style="text-align: left;">y_squared</th>
<th style="text-align: left;">xy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">16</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">20</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">36</td>
<td style="text-align: left;">64</td>
<td style="text-align: left;">48</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">5</td>
<td style="text-align: left;">6</td>
<td style="text-align: left;">25</td>
<td style="text-align: left;">36</td>
<td style="text-align: left;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">7</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">49</td>
<td style="text-align: left;">64</td>
<td style="text-align: left;">56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">7</td>
<td style="text-align: left;">8</td>
<td style="text-align: left;">9</td>
<td style="text-align: left;">64</td>
<td style="text-align: left;">81</td>
<td style="text-align: left;">72</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sumas</td>
<td style="text-align: left;">34</td>
<td style="text-align: left;">39</td>
<td style="text-align: left;">200</td>
<td style="text-align: left;">275</td>
<td style="text-align: left;">231</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Vemos 7 pares de valores para las variables <span class="math inline">\(x\)</span> e <span class="math inline">\(y\)</span>. Calculamos <span class="math inline">\(x^2\)</span> elevando al cuadrado cada valor de <span class="math inline">\(x\)</span>, y lo pusimos en una columna.<br>
Hicimos lo mismo con <span class="math inline">\(y^2\)</span>. Despu√©s calculamos <span class="math inline">\(xy\)</span>, multiplicando cada valor de <span class="math inline">\(x\)</span> con su correspondiente valor de <span class="math inline">\(y\)</span>, y tambi√©n lo pusimos en una columna.<br>
Finalmente, sumamos todas las columnas y pusimos esos totales al final.<br>
Esos son los n√∫meros que necesitamos para usar las f√≥rmulas y encontrar la mejor l√≠nea de ajuste.</p>
<p>As√≠ se ven las f√≥rmulas con los n√∫meros incluidos:</p>
<p><span class="math inline">\(\text{intercepto} = b = \frac{\sum{y}\sum{x^2}-\sum{x}\sum{xy}}{n\sum{x^2}-(\sum{x})^2} = \frac{39 * 200 - 34*231}{7*200-34^2} = -.221\)</span></p>
<p><span class="math inline">\(\text{pendiente} = m = \frac{n\sum{xy}-\sum{x}\sum{y}}{n\sum{x^2}-(\sum{x})^2} = \frac{7*231-34*39}{7*275-34^2} = 1.19\)</span></p>
<p>Genial. Ahora podemos verificar si lo hicimos bien.<br>
Vamos a graficar los datos en un diagrama de dispersi√≥n y trazar una l√≠nea con pendiente = 1.19 y una intersecci√≥n en el eje y de ‚Äì0.221.<br>
Como se muestra en la figura <a href="#fig-3corwithLine" class="quarto-xref">Figura&nbsp;<span>3.10</span></a>, la l√≠nea deber√≠a atravesar el centro de los puntos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>plot_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(x,y)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(plot_df,<span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y))<span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>,<span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#coef(lm(y~x,plot_df))</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3corwithLine" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3corwithLine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3corwithLine-1.png" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3corwithLine-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.10: Ejemplo de una l√≠nea de regresi√≥n con bandas de confianza que atraviesa algunos puntos en un diagrama de dispersi√≥n
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="interpretar-correlaciones" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="interpretar-correlaciones"><span class="header-section-number">3.6</span> Interpretar correlaciones</h2>
<p>¬øQu√© significa que haya ‚Äîo no haya‚Äî una correlaci√≥n entre dos medidas? ¬øC√≥mo deber√≠an interpretarse las correlaciones? ¬øQu√© tipo de inferencias se pueden hacer a partir de una correlaci√≥n? Todas estas son preguntas excelentes.<br>
El primer consejo es: <strong>ten√© cuidado al interpretar correlaciones</strong>. Y ahora te contamos por qu√©.</p>
<section id="correlaci√≥n-no-implica-causalidad" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="correlaci√≥n-no-implica-causalidad"><span class="header-section-number">3.6.1</span> Correlaci√≥n no implica causalidad</h3>
<p>Probablemente ya escuchaste que ‚Äúcorrelaci√≥n no implica causalidad‚Äù. ¬øPero por qu√© no? Hay muchas razones. Sin embargo, antes de meternos con las razones, empecemos con un caso en el que <strong>s√≠</strong> esperar√≠amos una conexi√≥n causal entre dos medidas.</p>
<p>Supongamos que compr√°s una planta serpiente (Sansevieria) para tu casa. Estas plantas son conocidas por ser f√°ciles de cuidar, porque casi no requieren atenci√≥n.<br>
Como la mayor√≠a de las plantas, necesitan algo de agua para sobrevivir. Pero tambi√©n necesitan <strong>la cantidad justa</strong> de agua.</p>
<p>Imaginemos un experimento donde cultiv√°s 1000 plantas serpiente en tu casa. Cada planta recibe una cantidad diferente de agua por d√≠a, desde 0 cucharaditas hasta 1000 cucharaditas por d√≠a. Vamos a asumir que el agua forma parte del proceso causal que permite que las plantas crezcan.<br>
Entonces, la cantidad de agua por d√≠a ser√≠a una de nuestras medidas. Y cada semana, med√≠s cu√°nto crecieron las plantas. Esa ser√≠a la segunda medida.</p>
<p>¬øTe pod√©s imaginar c√≥mo se ver√≠a un gr√°fico de dispersi√≥n con estos datos? Eje X: cucharaditas de agua por d√≠a. Eje Y: crecimiento semanal de la planta.</p>
<section id="incluso-cuando-hay-causalidad-puede-que-no-haya-correlaci√≥n-clara" class="level4" data-number="3.6.1.1">
<h4 data-number="3.6.1.1" class="anchored" data-anchor-id="incluso-cuando-hay-causalidad-puede-que-no-haya-correlaci√≥n-clara"><span class="header-section-number">3.6.1.1</span> Incluso cuando hay causalidad, puede que no haya correlaci√≥n clara</h4>
<p>La primera planta, que no recibe nada de agua, seguramente lo va a pasar mal y eventualmente morir. Deber√≠a mostrar el menor crecimiento semanal.<br>
¬øY las plantas que reciben solo unas pocas cucharaditas al d√≠a? Quiz√°s reciban justo lo necesario para mantenerse vivas, pero no para crecer mucho.<br>
Si est√°s imaginando un gr√°fico de dispersi√≥n, cada punto ser√≠a una planta. Algunos puntos deber√≠an estar en la esquina inferior izquierda (nada de agua = nada de crecimiento). A medida que aumenta el agua, los puntos deber√≠an ir subiendo hacia la derecha: m√°s agua, m√°s crecimiento.</p>
<p>¬øPero qu√© pasa cuando le das <strong>demasiada</strong> agua a una planta serpiente? Por experiencia personal: se muere.<br>
As√≠ que en alg√∫n momento, los puntos del gr√°fico deber√≠an empezar a <strong>bajar</strong> otra vez. Las plantas que reciben <strong>demasiada</strong> agua no crecen bien.</p>
<p>Ese gr√°fico imaginario tendr√≠a una forma de U invertida. De izquierda a derecha, los puntos suben, llegan a un m√°ximo, y despu√©s vuelven a bajar.<br>
¬øY qu√© pasa si calcul√°s el <em>r</em> de Pearson con esos datos? Te puede dar un valor cercano a 0. El gr√°fico de dispersi√≥n se ver√≠a m√°s o menos como en la figura <a href="#fig-3snakeplant" class="quarto-xref">Figura&nbsp;<span>3.11</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>water<span class="ot">&lt;-</span><span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">999</span>,<span class="dv">1</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>growth<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fu">seq</span>(<span class="dv">0</span>,<span class="dv">10</span>,(<span class="dv">10</span><span class="sc">/</span><span class="dv">499</span>)),<span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">0</span>,<span class="sc">-</span>(<span class="dv">10</span><span class="sc">/</span><span class="dv">499</span>)))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>noise<span class="ot">&lt;-</span><span class="fu">runif</span>(<span class="dv">1000</span>,<span class="sc">-</span><span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>growth<span class="ot">&lt;-</span>growth<span class="sc">+</span>noise</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>snake_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(growth,water)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(snake_df, <span class="fu">aes</span>(<span class="at">x=</span>water,<span class="at">y=</span>growth))<span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Agua (cucharaditas)"</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Crecimiento imaginario de una planta serpiente</span><span class="sc">\n</span><span class="st"> en funci√≥n del agua"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3snakeplant" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3snakeplant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3snakeplant-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3snakeplant-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.11: Ilustraci√≥n de una posible relaci√≥n entre la cantidad de agua y el crecimiento de la planta serpiente. El crecimiento aumenta con el agua, pero eventualmente vuelve a disminuir, porque demasiada agua hace que las plantas mueran.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Es cierto que parece m√°s una V invertida que una U invertida, pero se entiende la idea, ¬øno? Hay claramente una relaci√≥n entre el riego y el crecimiento de la planta serpiente. Pero esa relaci√≥n <strong>no es en una sola direcci√≥n</strong>. Como resultado, cuando calculamos el <em>r</em> de Pearson, obtenemos un valor que sugiere <strong>que no hay relaci√≥n</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(growth,water)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.02058351</code></pre>
</div>
</div>
<p>Lo que esto significa, en realidad, es que <strong>no hay una relaci√≥n lineal</strong> que se pueda describir con una sola l√≠nea recta. Cuando necesitamos l√≠neas o curvas que cambien de direcci√≥n, estamos ante una relaci√≥n <strong>no lineal</strong>.</p>
<p>Este ejemplo muestra algunas complicaciones al interpretar correlaciones. Ya sabemos que las plantas necesitan agua para crecer, as√≠ que esperamos que haya alguna relaci√≥n entre la cantidad de agua y el crecimiento.<br>
Si miramos solo la primera mitad de los datos, vemos una correlaci√≥n positiva.<br>
Si miramos solo la segunda mitad, vemos una correlaci√≥n negativa.<br>
Y si miramos todos los datos juntos, <strong>no vemos ninguna correlaci√≥n</strong>.<br>
Uf. Entonces, <strong>incluso cuando hay una conexi√≥n causal entre dos variables</strong>, eso no garantiza que obtengamos evidencia clara al calcular un coeficiente de correlaci√≥n.</p>
<blockquote class="blockquote">
<p>üß† Consejo pro: Esta es una de las razones por las que es tan importante graficar tus datos. Si ves un patr√≥n en forma de U invertida, entonces un an√°lisis de correlaci√≥n probablemente <strong>no sea el mejor</strong> para esos datos.</p>
</blockquote>
</section>
<section id="variable-confundida-o-problema-de-la-tercera-variable" class="level4" data-number="3.6.1.2">
<h4 data-number="3.6.1.2" class="anchored" data-anchor-id="variable-confundida-o-problema-de-la-tercera-variable"><span class="header-section-number">3.6.1.2</span> Variable confundida, o problema de la tercera variable</h4>
<p>Cualquiera puede correlacionar dos cosas que se puedan medir. Por ejemplo, podr√≠amos tomar a 100 personas y preguntarles todo tipo de cosas, como:</p>
<ol type="1">
<li>¬øQu√© tan feliz sos?<br>
</li>
<li>¬øQu√© edad ten√©s?<br>
</li>
<li>¬øCu√°nto med√≠s?<br>
</li>
<li>¬øCu√°nto gan√°s por a√±o?<br>
</li>
<li>¬øQu√© tan largas son tus pesta√±as?<br>
</li>
<li>¬øCu√°ntos libros le√≠ste en tu vida?<br>
</li>
<li>¬øQu√© tan fuerte es tu voz interior?</li>
</ol>
<p>Supongamos que encontramos una correlaci√≥n positiva entre el salario anual y la felicidad. Not√° que podr√≠amos haber hecho exactamente lo mismo correlacionando felicidad con salario.<br>
Si encontramos una correlaci√≥n, ¬øte animar√≠as a decir que el salario <strong>causa</strong> felicidad?<br>
Tal vez tiene algo que ver. Pero algo como la felicidad seguramente tiene <strong>muchas causas</strong>.<br>
La plata podr√≠a hacer feliz a algunas personas directamente.<br>
Pero, m√°s probablemente, la plata les permite acceder a otras cosas‚Ä¶ y quiz√°s algunas de esas cosas s√≠ generen felicidad.<br>
A esas ‚Äúotras cosas‚Äù les decimos <strong>variables de tercer orden</strong> o <strong>terceras variables</strong>.</p>
<p>Por ejemplo: quiz√°s las personas que viven en lugares m√°s lindos, con casas m√°s caras, son m√°s felices que quienes viven en lugares peores, con casas m√°s baratas.<br>
En ese escenario, no ser√≠a la plata la que causa felicidad, sino <strong>los lugares y casas que la plata puede comprar</strong>.<br>
Y aunque eso fuera cierto, las personas pueden ser m√°s o menos felices en un mont√≥n de situaciones diferentes.</p>
<p>La lecci√≥n ac√° es que una correlaci√≥n puede aparecer entre dos medidas debido a una <strong>tercera variable no medida directamente</strong>.<br>
Entonces, aunque encontremos una correlaci√≥n, <strong>no significa que podamos concluir</strong> nada firme sobre causalidad.</p>
</section>
</section>
<section id="correlaci√≥n-y-el-azar" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="correlaci√≥n-y-el-azar"><span class="header-section-number">3.6.2</span> Correlaci√≥n y el azar</h3>
<p>Otro aspecto muy importante de las correlaciones es el hecho de que <strong>pueden producirse por puro azar</strong>. Esto significa que pod√©s encontrar una correlaci√≥n positiva o negativa entre dos medidas <strong>aunque no tengan absolutamente nada que ver una con la otra</strong>. Tal vez esperar√≠as que la correlaci√≥n fuera cero cuando dos medidas est√°n completamente desligadas. Aunque eso puede pasar, tambi√©n puede suceder que dos variables no relacionadas produzcan <strong>correlaciones espurias</strong> simplemente por azar.</p>
<p>Vamos a demostrar c√≥mo pueden aparecer correlaciones por azar incluso cuando no hay ninguna conexi√≥n causal entre las medidas. Imagin√° dos personas participantes. Una est√° en el Polo Norte con una m√°quina de loter√≠a llena de bolillas numeradas del 1 al 10. La otra est√° en el Polo Sur, con otra m√°quina diferente pero tambi√©n con bolillas del 1 al 10. Hay un suministro infinito de bolillas en cada m√°quina, as√≠ que cualquier n√∫mero puede salir en cualquier momento. Cada participante elige 10 bolillas al azar y anota los n√∫meros. En este caso vamos a asumir que no hay forma de que las bolillas elegidas por un participante puedan influir causalmente en las del otro. Est√°n en extremos opuestos del planeta. As√≠ que debemos asumir que los n√∫meros son elegidos <strong>por azar puro</strong>.</p>
<p>Esto es lo que podr√≠an mostrar los n√∫meros elegidos por cada participante:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>Bolilla<span class="ot">&lt;-</span><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>Polo_norte<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">10</span>)))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>Polo_sur<span class="ot">&lt;-</span><span class="fu">round</span>(<span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">10</span>)))</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>the_df_balls<span class="ot">&lt;-</span><span class="fu">data.frame</span>(Bolilla,Polo_norte,Polo_sur)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co">#the_df_balls &lt;- the_df_balls %&gt;%</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  rbind(c("Sums",colSums(the_df_balls[1:10,2:3]))) %&gt;%</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  rbind(c("Means",colMeans(the_df_balls[1:10,2:3])))</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(the_df_balls)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Bolilla</th>
<th style="text-align: right;">Polo_norte</th>
<th style="text-align: right;">Polo_sur</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>En este caso puntual, si calculamos el <em>r</em> de Pearson, podr√≠amos obtener, por ejemplo, un valor como ( r = 0.51 ). Pero ya sabemos que <strong>ese valor no nos dice nada</strong> sobre la relaci√≥n entre las bolillas del Polo Norte y las del Polo Sur. Sabemos que esa relaci√≥n <strong>deber√≠a ser completamente aleatoria</strong>, porque as√≠ dise√±amos el experimento.</p>
<p>La mejor pregunta en este caso no es ‚Äú¬øcu√°l fue la correlaci√≥n?‚Äù, sino <strong>¬øqu√© puede producir el azar?</strong><br>
Por ejemplo: si repiti√©ramos este juego una y otra vez miles de veces ‚Äîcada vez eligiendo bolillas nuevas y cada vez calculando la correlaci√≥n‚Äî, ¬øqu√© obtendr√≠amos?</p>
<p>Primero, notar√≠amos <strong>variaci√≥n</strong>. El valor de <em>r</em> a veces ser√≠a positivo, a veces negativo, a veces grande y a veces peque√±o.<br>
Segundo, podr√≠amos ver <strong>c√≥mo se ve esa variaci√≥n</strong>. Esto nos dar√≠a una ventana hacia los tipos de correlaciones que <strong>el azar, por s√≠ solo, puede producir</strong>.</p>
<p>Vamos a ver qu√© pasa.</p>
<section id="simulaci√≥n-monte-carlo-de-correlaciones-aleatorias" class="level4" data-number="3.6.2.1">
<h4 data-number="3.6.2.1" class="anchored" data-anchor-id="simulaci√≥n-monte-carlo-de-correlaciones-aleatorias"><span class="header-section-number">3.6.2.1</span> Simulaci√≥n Monte Carlo de correlaciones aleatorias</h4>
<p>Es posible usar una computadora para simular nuestro juego tantas veces como queramos. Este proceso se conoce como <strong>simulaci√≥n Monte Carlo</strong>.</p>
<p>Abajo hay un script escrito en el lenguaje de programaci√≥n R. No vamos a entrar en los detalles del c√≥digo ahora. Pero vamos a explicar brevemente qu√© est√° haciendo. Fijate en la parte que dice que se crea un bucle que repite nuestro juego 1000 veces. Dentro del bucle hay variables llamadas, por ejemplo, <code>x</code> e <code>y</code>. Durante cada simulaci√≥n, se generan al azar 10 n√∫meros (entre 1 y 10) para cada variable. Esos n√∫meros representan las bolillas que habr√≠an salido de la m√°quina de loter√≠a. Una vez que tenemos los 10 n√∫meros para cada una, calculamos la correlaci√≥n usando <code>cor(x, y)</code>. Luego, guardamos ese valor de correlaci√≥n y pasamos a la pr√≥xima simulaci√≥n. Al final, vamos a tener 1000 valores de correlaci√≥n de Pearson.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>correlaciones_simuladas <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">0</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(sim <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  Polo_norte <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  Polo_sur <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  correlaciones_simuladas[sim] <span class="ot">&lt;-</span> <span class="fu">cor</span>(Polo_norte,Polo_sur)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>sim_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">simulaciones=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>,correlaciones_simuladas)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sim_df, <span class="fu">aes</span>(<span class="at">x =</span> simulaciones, <span class="at">y =</span> correlaciones_simuladas))<span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="sc">-</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Simulaci√≥n de 1000 valores de r"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3anotherthousand" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3anotherthousand-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3anotherthousand-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3anotherthousand-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.12: Otra figura que muestra el rango de valores de r que pueden obtenerse por azar.
</figcaption>
</figure>
</div>
</div>
</div>
<p>La <a href="#fig-3anotherthousand" class="quarto-xref">Figura&nbsp;<span>3.12</span></a> muestra esos 1000 valores de <span class="math inline">\(r\)</span> obtenidos en la simulaci√≥n. ¬øTe resulta familiar el gr√°fico? Ya hicimos una simulaci√≥n parecida antes. Cada punto en el gr√°fico representa el valor de ( r ) de una de las 1000 simulaciones. Como ves, los puntos est√°n por todos lados, entre ‚Äì1 y 1. La lecci√≥n importante ac√° es que <strong>el azar produjo todas estas correlaciones</strong>. Eso quiere decir que podemos encontrar ‚Äúcorrelaciones‚Äù en los datos que son completamente <strong>sin sentido</strong>, y que no reflejan ninguna relaci√≥n causal entre una medida y otra.</p>
<p>Vamos a ilustrar esta idea de encontrar correlaciones ‚Äúal azar‚Äù una vez m√°s, con una peque√±a animaci√≥n. Esta vez, te vamos a mostrar un gr√°fico de dispersi√≥n con los valores aleatorios de las bolillas elegidas desde el Polo Norte y el Polo Sur. Si no hay relaci√≥n, deber√≠amos ver puntos por todos lados. Si llega a aparecer una relaci√≥n positiva (por pura casualidad), los puntos ir√°n de abajo a la izquierda hacia arriba a la derecha. Si aparece una relaci√≥n negativa (tambi√©n por azar), los puntos ir√°n de arriba a la izquierda hacia abajo a la derecha.</p>
<p>Una cosa m√°s para prepararte para la animaci√≥n: abajo, en la figura <span class="quarto-unresolved-ref">?fig-3reminder</span>, hay tres diagramas de dispersi√≥n que muestran correlaciones negativa, positiva y nula entre dos variables. Ya viste ese gr√°fico antes. Solo te estamos recordando que las l√≠neas azules ayudan a ver la direcci√≥n de la correlaci√≥n.<br>
Las correlaciones negativas ocurren cuando la l√≠nea baja de izquierda a derecha.<br>
Las positivas, cuando la l√≠nea sube de izquierda a derecha.<br>
Y las correlaciones nulas, cuando la l√≠nea es plana (ni sube ni baja).</p>
<p>Ok, ahora estamos listos para la animaci√≥n. La figura <a href="#fig-3randcor10gif" class="quarto-xref">Figura&nbsp;<span>3.13</span></a> muestra el proceso de muestreo aleatorio de dos conjuntos de n√∫meros: uno para la variable X y otro para la variable Y. Cada vez tomamos 10 n√∫meros para cada variable, los graficamos, y trazamos una l√≠nea a trav√©s de los puntos. Record√°: estos n√∫meros son completamente aleatorios, as√≠ que deber√≠amos esperar, en promedio, <strong>que no haya correlaci√≥n entre ellos</strong>. Sin embargo, eso <strong>no es lo que pasa</strong>. Pod√©s ver c√≥mo la l√≠nea cambia todo el tiempo. A veces encontramos una correlaci√≥n negativa (la l√≠nea baja), otras veces una correlaci√≥n positiva (la l√≠nea sube), y otras veces parece que no hay ninguna correlaci√≥n (la l√≠nea es m√°s plana).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="at">path=</span><span class="st">"imgs/gifs/corUnifn10-1_es.gif"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3randcor10gif" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3randcor10gif-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="imgs/gifs/corUnifn10-1_es.gif" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3randcor10gif-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.13: Puntos de datos completamente aleatorios tomados de una distribuci√≥n uniforme, con un tama√±o muestral peque√±o de 10. La l√≠nea azul gira a veces mostrando correlaciones grandes que se producen por azar
</figcaption>
</figure>
</div>
</div>
</div>
<p>Capaz est√°s pensando que esto es un poco inquietante. Si sabemos que no deber√≠a haber ninguna correlaci√≥n entre dos variables aleatorias, ¬øc√≥mo puede ser que estemos encontrando correlaciones? ¬øNo es un gran problema? O sea, si alguien me muestra una correlaci√≥n entre dos cosas y me dice que est√°n relacionadas, ¬øc√≥mo puedo saber si eso es verdad? Despu√©s de todo, ¬°podr√≠a ser pura suerte! El azar tambi√©n puede producir eso.</p>
<p>Por suerte, no todo est√° perdido. Podemos mirar nuestros datos simulados de otra manera, usando un histograma. ¬øTe acord√°s que antes de la animaci√≥n hicimos 1000 simulaciones con n√∫meros aleatorios y calculamos el valor de (r) para cada una? Si ponemos todos esos valores de (r) en un histograma, vamos a tener una mejor idea de c√≥mo se comporta el azar. Vamos a ver qu√© tipo de correlaciones es m√°s o menos probable que el azar produzca.</p>
<p>La figura <a href="#fig-3histrandcor" class="quarto-xref">Figura&nbsp;<span>3.14</span></a> muestra ese histograma de los valores simulados de <span class="math inline">\(r\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(correlaciones_simuladas,<span class="at">breaks=</span><span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>,.<span class="dv">1</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3histrandcor" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3histrandcor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3histrandcor-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3histrandcor-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.14: Histograma que muestra la distribuci√≥n de frecuencia de los valores de r obtenidos entre dos variables X e Y completamente aleatorias (tama√±o muestral = 10). Todo el rango de valores de r puede surgir solo por azar. Los valores grandes de r son menos comunes que los peque√±os.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Not√° que este histograma <strong>no es plano</strong>. La mayor√≠a de los valores de (r) simulados est√°n <strong>cerca de cero</strong>. Y tambi√©n pod√©s ver que las barras se achican a medida que te alej√°s de cero, ya sea en direcci√≥n positiva o negativa. El mensaje principal ac√° es que el azar puede producir un rango amplio de correlaciones. Sin embargo, <strong>no todas ocurren con la misma frecuencia</strong>. Por ejemplo, las barras cercanas a ‚Äì1 y 1 son muy bajas. El azar <strong>casi nunca</strong> produce correlaciones perfectas. Las barras alrededor de ‚Äì0.5 y 0.5 tambi√©n son m√°s chicas que las del centro: eso significa que correlaciones medianas <strong>no son tan comunes</strong> cuando los datos son puramente aleatorios.</p>
<p>Pod√©s pensar este histograma como una especie de ‚Äú<strong>ventana del azar</strong>‚Äù. Te muestra lo que el azar <strong>suele hacer</strong>, y lo que <strong>suele no hacer</strong>. Ahora imaginemos que est√°s trabajando con un conjunto real de datos, no con datos simulados. Y calcul√°s un valor de ( r = 0.7 ). ¬øQu√© significa eso? ¬øEs un valor de correlaci√≥n grande? ¬øO podr√≠a haber sido generado por azar?</p>
<p>Una forma de pensar esta pregunta es usar el histograma del azar como ‚Äúventana‚Äù. Si tu valor de ( r ) cae en el centro del histograma ‚Äîdigamos, cerca de 0‚Äî, entonces es muy probable que el azar haya podido generarlo. Pero si tu valor est√° lejos del centro ‚Äîdigamos, cerca de ‚Äì0.8 o +0.8‚Äî, entonces es poco probable que lo haya generado el azar. Eso te da m√°s confianza de que tu valor de ( r ) representa algo real.</p>
<p>Esta idea es muy parecida a la l√≥gica del <strong>p-valor</strong>, que vas a aprender m√°s adelante en el curso. La idea es que mir√°s tus datos, calcul√°s una estad√≠stica (como ( r )), y despu√©s te pregunt√°s: ‚Äú¬øqu√© tan probable es que este valor haya sido generado por azar?‚Äù. Si la respuesta es ‚Äúmuy poco probable‚Äù, entonces pod√©s tener m√°s confianza en que el patr√≥n que ves en tus datos <strong>no se debe simplemente al azar</strong>.</p>
</section>
</section>
<section id="el-tama√±o-de-muestra-reduce-el-poder-del-azar" class="level3" data-number="3.6.3">
<h3 data-number="3.6.3" class="anchored" data-anchor-id="el-tama√±o-de-muestra-reduce-el-poder-del-azar"><span class="header-section-number">3.6.3</span> El tama√±o de muestra reduce el poder del azar</h3>
<p>En todo este cap√≠tulo estuvimos usando ejemplos con muestras peque√±as ‚Äîpor ejemplo, 10 valores por variable. Pero, ¬øqu√© pasa si us√°s muestras m√°s grandes?</p>
<p>Vamos a repetir la simulaci√≥n de Monte Carlo, pero esta vez con diferentes tama√±os muestrales. La figura <a href="#fig-3corrandN" class="quarto-xref">Figura&nbsp;<span>3.15</span></a> muestra cuatro histogramas diferentes, que muestran valores de ( r ) generados por azar para tama√±os de muestra de 10, 50, 100 y 1000.</p>
<p>Fijate en lo que pasa cuando aumentamos el tama√±o muestral. Con muestras peque√±as (como 10), el azar puede producir una gran variedad de valores de ( r ). Pero a medida que aument√°s el tama√±o de la muestra, el histograma se vuelve m√°s angosto. Eso significa que el azar tiene <strong>menos poder</strong> para producir valores extremos de ( r ).</p>
<p>Entonces, si trabaj√°s con una muestra grande y encontr√°s un valor de ( r ) bastante alejado de cero, es mucho m√°s probable que ese valor <strong>represente una relaci√≥n real</strong> y <strong>no simplemente el azar</strong>.</p>
<p>Gracias. A continuaci√≥n te traduzco fielmente esta secci√≥n del cap√≠tulo, incluyendo las leyendas, explicaciones y descripci√≥n de las animaciones, y recordando insertar los <code>chunks</code> de c√≥digo donde correspondan:</p>
<p>La figura <a href="#fig-3corrandN" class="quarto-xref">Figura&nbsp;<span>3.15</span></a> muestra cuatro histogramas diferentes con los valores de correlaci√≥n de Pearson ( r ) para cada uno de los escenarios. Cada escenario involucra un tama√±o muestral distinto: 10, 50, 100 y 1000.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>all_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(s_size <span class="cf">in</span>  <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">50</span>,<span class="dv">100</span>,<span class="dv">1000</span>)){</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  simulated_correlations <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">0</span>)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(sim <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>){</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    North_pole <span class="ot">&lt;-</span> <span class="fu">runif</span>(s_size,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    South_pole <span class="ot">&lt;-</span> <span class="fu">runif</span>(s_size,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    simulated_correlations[sim] <span class="ot">&lt;-</span> <span class="fu">cor</span>(North_pole,South_pole)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>sim_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">sample_size=</span><span class="fu">rep</span>(s_size,<span class="dv">1000</span>),<span class="at">sims=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>,simulated_correlations)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>all_df<span class="ot">&lt;-</span><span class="fu">rbind</span>(all_df,sim_df)</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_df,<span class="fu">aes</span>(<span class="at">x=</span>simulated_correlations))<span class="sc">+</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()<span class="sc">+</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sample_size)<span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Correlaci√≥n simulada"</span>,<span class="at">y=</span><span class="st">"Frecuencia"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-3corrandN" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3corrandN-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-Correlation_files/figure-html/fig-3corrandN-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3corrandN-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.15: Histograma de 1000 valores simulados de r, generados al azar, con diferentes tama√±os muestrales. Cada panel muestra el histograma para N = 10, 50, 100 y 1000. Cuanto m√°s grande el tama√±o muestral, m√°s cerca de 0 tienden los valores de r generados por azar.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Si observ√°s los cuatro histogramas, deber√≠as notar un patr√≥n claro. El ancho o rango de cada histograma se achica a medida que aumenta el tama√±o muestral. ¬øQu√© est√° pasando ac√°? Bueno, ya sabemos que podemos pensar estos histogramas como ventanas del azar. Nos muestran qu√© valores de ( r ) ocurren con m√°s frecuencia, y cu√°les no.</p>
<p>Cuando el tama√±o muestral es 10, aparecen muchos valores diferentes de ( r ). Ese histograma es bastante plano y extendido. Pero a medida que el tama√±o muestral aumenta, vemos que la ventana del azar se vuelve m√°s angosta. Por ejemplo, cuando llegamos a N = 1000, casi todos los valores de ( r ) est√°n muy cerca de 0.</p>
<p>Una conclusi√≥n importante es que <strong>aumentar el tama√±o muestral estrecha la ventana del azar</strong>. Entonces, si hac√©s un estudio con 1000 observaciones por variable y encontr√°s una correlaci√≥n de 0.5, pod√©s mirar el histograma de abajo a la derecha y ver que ese valor <strong>no ocurre muy seguido solo por azar</strong>. De hecho, puede que no aparezca ni una sola vez en 1000 simulaciones.<br>
Como resultado, si ten√©s una muestra grande como N = 1000 y encontr√°s una correlaci√≥n observada de 0.5, pod√©s estar m√°s seguro de que <strong>no es espuria</strong>. Si no fue el azar el que la produjo, entonces <strong>algo m√°s s√≠ lo hizo</strong>.</p>
<p>Por √∫ltimo, not√° c√≥mo tu confianza respecto a si el azar est√° afectando tus resultados depende <strong>del tama√±o de tu muestra</strong>. Si solo ten√©s 10 observaciones por variable y encontr√°s ( r = 0.5 ), no deber√≠as estar tan seguro de que refleja una relaci√≥n real. Como ves, valores de ( r = 0.5 ) ocurren bastante seguido <strong>solo por azar</strong> cuando la muestra es peque√±a.</p>
<blockquote class="blockquote">
<p>üß† Consejo pro: cuando dise√±√°s un experimento, vos decid√≠s cu√°ntas muestras vas a recolectar. Eso significa que pod√©s elegir <strong>estrechar la ventana del azar</strong>. As√≠, si encontr√°s una relaci√≥n en los datos, pod√©s tener m√°s confianza en que es real, y no un simple capricho del azar.</p>
</blockquote>
</section>
<section id="algunas-pel√≠culas-m√°s" class="level3" data-number="3.6.4">
<h3 data-number="3.6.4" class="anchored" data-anchor-id="algunas-pel√≠culas-m√°s"><span class="header-section-number">3.6.4</span> Algunas pel√≠culas m√°s</h3>
<p>Vamos a reforzar estas ideas con algunas animaciones m√°s. Cuando el tama√±o muestral es peque√±o (N es chico), el error muestral puede causar todo tipo de ‚Äúpatrones‚Äù en los datos. Esto hace posible ‚Äîy de hecho com√∫n‚Äî que aparezcan ‚Äúcorrelaciones‚Äù entre dos conjuntos de n√∫meros. Cuando aumentamos el tama√±o muestral, el error muestral se reduce, lo que hace menos probable que aparezcan correlaciones <strong>solo por azar</strong>. Cuando N es grande, el azar tiene <strong>menos oportunidades de operar</strong>.</p>
<section id="ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-no-hay-correlaci√≥n" class="level4" data-number="3.6.4.1">
<h4 data-number="3.6.4.1" class="anchored" data-anchor-id="ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-no-hay-correlaci√≥n"><span class="header-section-number">3.6.4.1</span> Ver c√≥mo se comporta la correlaci√≥n cuando no hay correlaci√≥n</h4>
<p>Abajo se muestran n√∫meros generados aleatoriamente para dos variables, los graficamos, y mostramos la correlaci√≥n usando una l√≠nea. Hay cuatro paneles, y cada uno muestra un tama√±o muestral distinto: 10, 50, 100 y 1000 observaciones en cada muestra.</p>
<p>Record√°: como estamos muestreando n√∫meros aleatoriamente, no deber√≠a haber ninguna relaci√≥n entre las variables X e Y. Pero, como venimos discutiendo, a veces podemos observar una correlaci√≥n ‚Äîproducto del azar. Lo importante es mirar <strong>c√≥mo se comporta la l√≠nea</strong> en los cuatro paneles de la figura <a href="#fig-3corRandfour" class="quarto-xref">Figura&nbsp;<span>3.16</span></a>.<br>
Con tama√±o muestral de 10, la l√≠nea gira para cualquier lado. Tambi√©n se mueve bastante con tama√±os de 50 o 100. Incluso con 1000 se mueve un poco, pero mucho menos. En todos los casos esperamos que la l√≠nea sea plana, pero cada vez que tomamos nuevas muestras, a veces la l√≠nea nos muestra <strong>patrones falsos</strong>.</p>
<p>::: {.content-visible when-format=‚Äúhtml‚Äù}</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="at">path=</span><span class="st">"imgs/gifs/corUnifFourNs-1_es.gif"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3corRandfour" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3corRandfour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="imgs/gifs/corUnifFourNs-1_es.gif" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3corRandfour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.16: Animation of how correlation behaves for completely random X and Y variables as a function of sample size. The best fit line is not very stable for small sample-sizes, but becomes more reliably flat as sample-size increases.
</figcaption>
</figure>
</div>
</div>
</div>
<p>:::</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>all_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(sim <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(n <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">50</span>,<span class="dv">100</span>,<span class="dv">1000</span>)){</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  North_pole <span class="ot">&lt;-</span> <span class="fu">runif</span>(n,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  South_pole <span class="ot">&lt;-</span> <span class="fu">runif</span>(n,<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  t_df<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="at">nsize=</span><span class="fu">rep</span>(n,n),</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">simulation=</span><span class="fu">rep</span>(sim,n),</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                                  North_pole,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                                  South_pole)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  all_df<span class="ot">&lt;-</span><span class="fu">rbind</span>(all_df,t_df)</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(all_df,<span class="fu">aes</span>(<span class="at">x=</span>North_pole,<span class="at">y=</span>South_pole))<span class="sc">+</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm, <span class="at">se=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>nsize)<span class="sc">+</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_states</span>(</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    simulation,</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">transition_length =</span> <span class="dv">2</span>,</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_length =</span> <span class="dv">1</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  )<span class="sc">+</span><span class="fu">enter_fade</span>() <span class="sc">+</span> </span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">exit_shrink</span>() <span class="sc">+</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ease_aes</span>(<span class="st">'sine-in-out'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>¬øCu√°l de estas l√≠neas deber√≠as creer? Bueno, esperamos que veas que la l√≠nea correspondiente a N = 1000 es <strong>la m√°s estable</strong>. Tiende a ser muy plana cada vez, y <strong>no depende tanto de la muestra en particular</strong>. En cambio, la l√≠nea con solo 10 observaciones <strong>va para cualquier lado</strong>.</p>
<p>La conclusi√≥n ac√° es que si alguien te dice que encontr√≥ una correlaci√≥n, deber√≠as preguntar cu√°ntas observaciones ten√≠a en su muestra. Si solo ten√≠a 10 observaciones, ¬øc√≥mo podr√≠as confiar en esa afirmaci√≥n? ¬°No pod√©s! Ahora que sab√©s que muestras tan chicas pueden producir cualquier cosa <strong>solo por azar</strong>, deber√≠as desconfiar.<br>
En cambio, si descubr√≠s que la muestra era grande, pod√©s confiar un poco m√°s en el hallazgo.</p>
<p>En el ejemplo anterior, muestreamos n√∫meros de una distribuci√≥n <strong>uniforme</strong>. Muchos datos reales provienen de una distribuci√≥n normal (o aproximadamente normal). Podemos repetir lo anterior, pero muestreando de una misma distribuci√≥n normal. Igual habr√° <strong>cero correlaci√≥n real</strong> entre X e Y, porque todo fue generado al azar.<br>
La figura <span class="quarto-unresolved-ref">?fig-3normCorfour</span> muestra el mismo comportamiento. Con tama√±os muestrales peque√±os, la correlaci√≥n calculada fluct√∫a mucho. Con muestras grandes, no.</p>
</section>
</section>
<section id="ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-realmente-hay-una-correlaci√≥n" class="level3" data-number="3.6.5">
<h3 data-number="3.6.5" class="anchored" data-anchor-id="ver-c√≥mo-se-comporta-la-correlaci√≥n-cuando-realmente-hay-una-correlaci√≥n"><span class="header-section-number">3.6.5</span> Ver c√≥mo se comporta la correlaci√≥n cuando realmente <strong>hay</strong> una correlaci√≥n</h3>
<p>A veces s√≠ existen correlaciones entre dos variables que <strong>no</strong> son producto del azar. La figura <a href="#fig-3realcorFour" class="quarto-xref">Figura&nbsp;<span>3.17</span></a> muestra una animaci√≥n con cuatro gr√°ficos de dispersi√≥n. Cada uno muestra la correlaci√≥n entre dos variables. Nuevamente, variamos el tama√±o muestral: 10, 50, 100 y 1000 observaciones. Los datos fueron generados de forma que <strong>contengan una correlaci√≥n positiva real</strong>. As√≠ que deber√≠amos esperar que la l√≠nea suba desde la esquina inferior izquierda hacia la esquina superior derecha.<br>
Sin embargo, los datos todav√≠a tienen variabilidad. As√≠ que esta vez, el error muestral debido al azar va a ‚Äúdifuminar‚Äù un poco la correlaci√≥n. Sabemos que est√° ah√≠, pero a veces el azar puede hacer que desaparezca.</p>
<p>Not√° que en el panel superior izquierdo (tama√±o muestral = 10), la l√≠nea se mueve mucho m√°s que en los otros paneles. Cada nuevo conjunto de muestras produce correlaciones distintas. A veces, la l√≠nea incluso se aplana o baja.<br>
Pero a medida que aumentamos el tama√±o muestral, vemos que la l√≠nea <strong>no cambia tanto</strong>: siempre va hacia arriba, mostrando una correlaci√≥n positiva.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="at">path=</span><span class="st">"imgs/gifs/corRealgif-1_es.gif"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3realcorFour" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3realcorFour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="imgs/gifs/corRealgif-1_es.gif" class="img-fluid figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3realcorFour-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;3.17: C√≥mo se comporta la correlaci√≥n en funci√≥n del tama√±o muestral cuando existe una correlaci√≥n real entre las variables X e Y.
</figcaption>
</figure>
</div>
</div>
</div>
<p>La lecci√≥n principal ac√° es que <strong>incluso cuando hay una correlaci√≥n positiva real entre dos variables, podr√≠as no verla si tu muestra es muy peque√±a</strong>. Por ejemplo, podr√≠as tener mala suerte con la muestra que recolectaste. Esa muestra podr√≠a mostrar una correlaci√≥n negativa, ¬°aunque la verdadera correlaci√≥n sea positiva!<br>
Lamentablemente, en el mundo real casi siempre tenemos solo una muestra, la que logramos recolectar. As√≠ que siempre tenemos que preguntarnos si tuvimos suerte‚Ä¶ o no.</p>
<p>Por suerte, si quer√©s eliminar el factor suerte, <strong>todo lo que necesit√°s es recolectar una muestra m√°s grande</strong>. As√≠ vas a tener muchas m√°s chances de observar el patr√≥n real, y no uno que apareci√≥ por azar.</p>
</section>
</section>
<section id="resumen" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="resumen"><span class="header-section-number">3.7</span> Resumen</h2>
<p>En esta secci√≥n hablamos sobre la correlaci√≥n, y empezamos a construir algunas intuiciones sobre <strong>estad√≠stica inferencial</strong>, que es el gran tema de los pr√≥ximos cap√≠tulos. Por ahora, las ideas clave son:</p>
<ol type="1">
<li>Podemos medir relaciones en los datos usando herramientas como la correlaci√≥n.<br>
</li>
<li>Las correlaciones que encontramos pueden deberse a muchas causas distintas, por eso <strong>son dif√≠ciles de interpretar</strong>.<br>
</li>
<li>El azar puede producir correlaciones, as√≠ que existe la posibilidad de que sean completamente <strong>sin sentido</strong>.<br>
</li>
<li>Sin embargo, podemos crear un modelo que represente exactamente <strong>lo que el azar puede hacer</strong>. Ese modelo nos dice si es m√°s o menos probable que el azar genere correlaciones de cierto tama√±o.<br>
</li>
<li>Podemos usar ese modelo del azar para ayudarnos a decidir sobre nuestros propios datos. Podemos comparar la correlaci√≥n que encontramos con ese modelo, y preguntarnos si es probable que haya sido generada por azar.</li>
</ol>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-salsburg2001lady" class="csl-entry" role="listitem">
Salsburg, David. 2001. <em>The Lady Tasting Tea: <span>How</span> Statistics Revolutionized Science in the Twentieth Century</em>. <span>Macmillan</span>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/crumplab\.com\/statistics\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-Describing_Data.html" class="pagination-link" aria-label="Describir los datos">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Describir los datos</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-SamplesPopulations.html" class="pagination-link" aria-label="Probability, Sampling, and Estimation">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Probability, Sampling, and Estimation</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/CrumpLab/statistics/edit/master/03-Correlation.qmd" class="toc-action"><i class="bi bi-github"></i>Editar esta p√°gina</a></li></ul></div></div></div></footer></body></html>